(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_;b=a.Vide=a.Vide||{};c=b.WebSharper=b.WebSharper||{};d=c.Client=c.Client||{};e=a.WebSharper=a.WebSharper||{};f=e.Obj=e.Obj||{};g=e.UI=e.UI||{};h=g.Var$1=g.Var$1||{};i=e.Operators=e.Operators||{};j=g.Templating=g.Templating||{};k=j.Runtime=j.Runtime||{};l=k.Server=k.Server||{};m=l.TemplateInstance=l.TemplateInstance||{};n=e.Arrays=e.Arrays||{};o=l.ProviderBuilder=l.ProviderBuilder||{};p=g.ListModel=g.ListModel||{};q=g.TemplateHole=g.TemplateHole||{};r=e.Unchecked=e.Unchecked||{};s=a.Vide$WebSharper_Templates=a.Vide$WebSharper_Templates||{};t=l.Handler=l.Handler||{};u=g.Var=g.Var||{};v=g.ConcreteVar=g.ConcreteVar||{};w=g.Snap=g.Snap||{};x=g.TemplateHoleModule=g.TemplateHoleModule||{};y=x.VarStr=x.VarStr||{};z=x.Elt=x.Elt||{};A=a.System=a.System||{};B=A.Guid=A.Guid||{};C=a.StartupCode$Vide_WebSharper$Client=a.StartupCode$Vide_WebSharper$Client||{};D=x.Text=x.Text||{};E=x.EventQ=x.EventQ||{};F=e.JavaScript=e.JavaScript||{};G=F.Pervasives=F.Pervasives||{};H=g.Client=g.Client||{};I=H.Templates=H.Templates||{};J=g.Doc=g.Doc||{};K=g.Abbrev=g.Abbrev||{};L=K.Fresh=K.Fresh||{};M=e.Collections=e.Collections||{};N=M.Dictionary=M.Dictionary||{};O=a.EventTarget;P=a.Node;Q=g.View=g.View||{};R=a.Object;S=M.HashSet=M.HashSet||{};T=e.Seq=e.Seq||{};U=l.TemplateInitializer=l.TemplateInitializer||{};V=x.VarFloatUnchecked=x.VarFloatUnchecked||{};W=x.VarBool=x.VarBool||{};X=x.VarDateTime=x.VarDateTime||{};Y=x.VarFile=x.VarFile||{};Z=F.JS=F.JS||{};_0=x.VarDomElement=x.VarDomElement||{};_1=e.Numeric=e.Numeric||{};_2=M.DictionaryUtil=M.DictionaryUtil||{};_3=e.Enumerator=e.Enumerator||{};_4=_3.T=_3.T||{};_5=a.WindowOrWorkerGlobalScope;_6=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_7=g.Docs=g.Docs||{};_8=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_9=g.DocElemNode=g.DocElemNode||{};_=a.CharacterData;$=g.Storage=g.Storage||{};ba=a.Blob;bb=g.Elt=g.Elt||{};bc=a.Element;bd=I.Prepare=I.Prepare||{};be=e.Slice=e.Slice||{};bf=g.DomUtility=g.DomUtility||{};bg=M.KeyCollection=M.KeyCollection||{};bh=g.An=g.An||{};bi=H.Settings=H.Settings||{};bj=K.Mailbox=K.Mailbox||{};bk=H.Attrs=H.Attrs||{};bl=bk.Dyn=bk.Dyn||{};bm=g.Array=g.Array||{};bn=$.ArrayStorage=$.ArrayStorage||{};bo=g.Attrs=g.Attrs||{};bp=x.Attribute=x.Attribute||{};bq=x.Event=x.Event||{};br=g.AttrModule=g.AttrModule||{};bs=g.AttrProxy=g.AttrProxy||{};bt=x.AfterRender=x.AfterRender||{};bu=x.AfterRenderQ=x.AfterRenderQ||{};bv=e.List=e.List||{};bw=bv.T=bv.T||{};bx=e.Strings=e.Strings||{};by=g.Updates=g.Updates||{};bz=M.ValueCollection=M.ValueCollection||{};bA=H.Docs=H.Docs||{};bB=bA.RunState=bA.RunState||{};bC=bA.NodeSet=bA.NodeSet||{};bD=e.Concurrency=e.Concurrency||{};bE=g.Anims=g.Anims||{};bF=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bG=M.HashSetUtil=M.HashSetUtil||{};bH=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bI=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bJ=g.AppendList=g.AppendList||{};bK=g.DynamicAttrNode=g.DynamicAttrNode||{};bL=a.Error;bM=e.KeyNotFoundException=e.KeyNotFoundException||{};bN=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bO=bD.Scheduler=bD.Scheduler||{};bP=g.Easing=g.Easing||{};bQ=bD.AsyncBody=bD.AsyncBody||{};bR=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bS=bD.CT=bD.CT||{};bT=K.HashSet=K.HashSet||{};bU=g.BindVar=g.BindVar||{};bV=g.String=g.String||{};bW=g.CheckedInput=g.CheckedInput||{};bX=e.CancellationTokenSource=e.CancellationTokenSource||{};bY=bA.DomNodes=bA.DomNodes||{};bZ=e.Queue=e.Queue||{};b0=e.Char=e.Char||{};b1=e.DateUtil=e.DateUtil||{};b2=e.OperationCanceledException=e.OperationCanceledException||{};b3=e.Lazy=e.Lazy||{};b4=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b5=e.LazyExtensionsProxy=e.LazyExtensionsProxy||{};b6=b5.LazyRecord=b5.LazyRecord||{};b7=e&&e.Runtime;b8=a.console;b9=a.Math;b_=a.Date;d.Main=function(){var b$,ca,cb,cc,cd,ce,cf,cg,ch;b$=h.Create$1("");ca=(cb=(cc=(cd=(ce=J.Convert(function(ci){var cj,ck,cl,cm;return(cj=(ck=new o.New$1(),(ck.h.push(new D.New("name",ci)),ck)),(cl=t.CompleteHoles(cj.k,cj.h,[]),(cm=new m.New(cl[1],s.listitem(cl[0])),cj.i=cm,cm))).get_Doc();},d.People().v),(cf=new o.New$1(),(cf.h.push(new z.New("listcontainer",ce)),cf))),(cd.h.push(new y.New("name",b$)),cd)),(cc.h.push(t.EventQ2(cc.k,"add",function(){return cc.i;},function(){d.People().Append(b$.Get());b$.Set("");})),cc)),(cg=t.CompleteHoles(cb.k,cb.h,[["name",0,null]]),(ch=new m.New(cg[1],s.main(cg[0])),cb.i=ch,ch))).get_Doc();I.LoadLocalTemplates("");J.RunById("main",ca);};d.People=function(){C.$cctor();return C.People;};f=e.Obj=b7.Class({Equals:function(b$){return this===b$;},GetHashCode:function(){return -1;}},null,f);f.New=b7.Ctor(function(){},f);h=g.Var$1=b7.Class({},f,h);h.Create$1=function(b$){return new v.New(false,w.New({$:2,$0:b$,$1:[]}),b$);};i.FailWith=function(b$){throw new bL(b$);};i.KeyValue=function(b$){return[b$.K,b$.V];};i.range=function(b$,ca){var cb;cb=1+ca-b$;return cb<=0?[]:T.init(cb,function(cc){return cc+b$;});};m=l.TemplateInstance=b7.Class({get_Doc:function(){return this.doc;},SetAnchorRoot:function(b$){this.anchorRoot=b$;}},f,m);m.New=b7.Ctor(function(b$,ca){f.New.call(this);this.doc=ca;this.allVars=b$.$==0?b$.$0:i.FailWith("Should not happen");this.anchorRoot=null;},m);n.get=function(b$,ca){n.checkBounds(b$,ca);return b$[ca];};n.length=function(b$){return b$.dims===2?b$.length*b$.length:b$.length;};n.checkBounds=function(b$,ca){if(ca<0||ca>=b$.length)i.FailWith("Index was outside the bounds of the array.");};n.set=function(b$,ca,cb){n.checkBounds(b$,ca);b$[ca]=cb;};o=l.ProviderBuilder=b7.Class({},f,o);o.New$1=b7.Ctor(function(){var b$;f.New.call(this);this.i=null;this.k=(b$=B.NewGuid(),a.String(b$));this.h=b7.MarkResizable([]);b7.SetOptional(this,"s",null);},o);p=g.ListModel=b7.Class({Append:function(b$){var ca,cb,cc,cd;ca=this;cb=this["var"].Get();cc=this.key(b$);cd=n.tryFindIndex(function(ce){return r.Equals(ca.key(ce),cc);},cb);if(cd!=null&&cd.$==1)this["var"].Set(this.storage.SSetAt(cd.$0,b$,cb));else this["var"].Set(this.storage.SAppend(b$,cb));this.ObsoleteKey(cc);},ObsoleteKey:function(b$){var ca,cb;ca=(cb=null,[this.it.TryGetValue(b$,{get:function(){return cb;},set:function(cc){cb=cc;}}),cb]);if(ca[0]){w.Obsolete(ca[1]);this.it.RemoveKey(b$);}},GetEnumerator:function(){return _3.Get(this["var"].Get());},GetEnumerator0:function(){return _3.Get0(this["var"].Get());}},f,p);p.New=b7.Ctor(function(b$,ca){p.New$3.call(this,b$,h.Create$1(n.ofSeq(T.distinctBy(b$,ca.SInit()))),ca);},p);p.New$3=b7.Ctor(function(b$,ca,cb){f.New.call(this);this.key=b$;this["var"]=ca;this.storage=cb;this.v=Q.Map(function(cc){return cc.slice();},this["var"].get_View());this.it=new N.New$5();},p);q=g.TemplateHole=b7.Class({ForTextView:function(){b8.warn("Content hole filled with attribute data",this.get_Name());return null;},AddAttribute:function(b$,ca){b8.warn("Var hole filled with non-Var data",this.get_Name());},get_AsChoiceView:function(){b8.warn("Attribute value hole filled with non-text data",this.get_Name());return{$:0,$0:""};}},f,q);q.New=b7.Ctor(function(){f.New.call(this);},q);r.Equals=function(b$,ca){var cb,cc,cd,ce;if(b$===ca)return true;else{cb=typeof b$;if(cb=="object"){if(b$===null||b$===void 0||ca===null||ca===void 0||!r.Equals(typeof ca,"object"))return false;else if("Equals"in b$)return b$.Equals(ca);else if("Equals"in ca)return false;else if(b$ instanceof a.Array&&ca instanceof a.Array)return r.arrayEquals(b$,ca);else if(b$ instanceof a.Date&&ca instanceof a.Date)return r.dateEquals(b$,ca);else{cc=[true];for(var cf in b$)if(function(cg){cc[0]=!b$.hasOwnProperty(cg)||ca.hasOwnProperty(cg)&&r.Equals(b$[cg],ca[cg]);return!cc[0];}(cf))break;if(cc[0]){for(var cg in ca)if(function(ch){cc[0]=!ca.hasOwnProperty(ch)||b$.hasOwnProperty(ch);return!cc[0];}(cg))break;}return cc[0];}}else return cb=="function"&&("$Func"in b$?b$.$Func===ca.$Func&&b$.$Target===ca.$Target:"$Invokes"in b$&&"$Invokes"in ca&&r.arrayEquals(b$.$Invokes,ca.$Invokes));}};r.arrayEquals=function(b$,ca){var cb,cc;if(n.length(b$)===n.length(ca)){cb=true;cc=0;while(cb&&cc<n.length(b$)){!r.Equals(n.get(b$,cc),n.get(ca,cc))?cb=false:void 0;cc=cc+1;}return cb;}else return false;};r.dateEquals=function(b$,ca){return b$.getTime()===ca.getTime();};r.Hash=function(b$){var ca;ca=typeof b$;return ca=="function"?0:ca=="boolean"?b$?1:0:ca=="number"?b$:ca=="string"?r.hashString(b$):ca=="object"?b$==null?0:b$ instanceof a.Array?r.hashArray(b$):r.hashObject(b$):0;};r.hashString=function(b$){var ca,cb,cc;if(b$===null)return 0;else{ca=5381;for(cb=0,cc=b$.length-1;cb<=cc;cb++)ca=r.hashMix(ca,b$[cb].charCodeAt());return ca;}};r.hashArray=function(b$){var ca,cb,cc;ca=-34948909;for(cb=0,cc=n.length(b$)-1;cb<=cc;cb++)ca=r.hashMix(ca,r.Hash(n.get(b$,cb)));return ca;};r.hashObject=function(b$){var ca,cb;if("GetHashCode"in b$)return b$.GetHashCode();else{ca=[0];for(var cc in b$)if(function(cd){ca[0]=r.hashMix(r.hashMix(ca[0],r.hashString(cd)),r.Hash(b$[cd]));return false;}(cc))break;return ca[0];}};r.hashMix=function(b$,ca){return(b$<<5)+b$+ca;};r.Compare=function(b$,ca){var cb,cc,cd,ce,cf,cg;if(b$===ca)return 0;else{cc=typeof b$;switch(cc=="function"?1:cc=="boolean"?2:cc=="number"?2:cc=="string"?2:cc=="object"?3:0){case 0:return typeof ca=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return b$<ca?-1:1;case 3:if(b$===null)cd=-1;else if(ca===null)cd=1;else if("CompareTo"in b$)cd=b$.CompareTo(ca);else if("CompareTo0"in b$)cd=b$.CompareTo0(ca);else if(b$ instanceof a.Array&&ca instanceof a.Array)cd=r.compareArrays(b$,ca);else if(b$ instanceof a.Date&&ca instanceof a.Date)cd=r.compareDates(b$,ca);else{ce=[0];for(var ch in b$)if(function(ci){return!b$.hasOwnProperty(ci)?false:!ca.hasOwnProperty(ci)?(ce[0]=1,true):(ce[0]=r.Compare(b$[ci],ca[ci]),ce[0]!==0);}(ch))break;if(ce[0]===0){for(var ci in ca)if(function(cj){return!ca.hasOwnProperty(cj)?false:!b$.hasOwnProperty(cj)&&(ce[0]=-1,true);}(ci))break;}cd=ce[0];}return cd;}}};r.compareArrays=function(b$,ca){var cb,cc;if(n.length(b$)<n.length(ca))return -1;else if(n.length(b$)>n.length(ca))return 1;else{cb=0;cc=0;while(cb===0&&cc<n.length(b$)){cb=r.Compare(n.get(b$,cc),n.get(ca,cc));cc=cc+1;}return cb;}};r.compareDates=function(b$,ca){return r.Compare(b$.getTime(),ca.getTime());};s.listitem=function(b$){I.LoadLocalTemplates("index");return b$?I.NamedTemplate("index",{$:1,$0:"listitem"},b$):void 0;};s.main=function(b$){I.LoadLocalTemplates("index");return b$?I.NamedTemplate("index",{$:1,$0:"main"},b$):void 0;};t.EventQ2=function(b$,ca,cb,cc){return new E.New(ca,function(cd){return function(ce){var cf;cf=cb();cf.SetAnchorRoot(cd);return cc({Vars:cf,Anchors:cf,Target:cd,Event:ce});};});};t.CompleteHoles=function(b$,ca,cb){var cd,ce,cf,cg,ch;function cc(ci,cj,ck){var cl;return ce.Contains(ci)?null:(cl=r.Equals(cj,0)?U.GetOrAddHoleFor(b$,ci,function(){return new y.New(ci,h.Create$1(""));}):r.Equals(cj,1)?U.GetOrAddHoleFor(b$,ci,function(){return new V.New(ci,h.Create$1(0));}):r.Equals(cj,2)?U.GetOrAddHoleFor(b$,ci,function(){return new W.New(ci,h.Create$1(false));}):r.Equals(cj,3)?U.GetOrAddHoleFor(b$,ci,function(){return new X.New(ci,h.Create$1(-8640000000000000));}):r.Equals(cj,4)?U.GetOrAddHoleFor(b$,ci,function(){return new Y.New(ci,h.Create$1([]));}):r.Equals(cj,5)?U.GetOrAddHoleFor(b$,ci,function(){var cm;cm=self.document.querySelector("[ws-dom="+ci+"]");cm.removeAttribute("ws-dom");return new _0.New(ci,h.Create$1({$:1,$0:cm}));}):i.FailWith("Invalid value type"),(cd.set_Item(ci,cl),{$:1,$0:cl}));}cd=new N.New$5();ce=new S.New$3();cf=_3.Get(ca);try{while(cf.MoveNext()){cg=cf.Current();ch=cg.get_Name();ce.SAdd(ch);cd.set_Item(ch,cg);}}finally{if(typeof cf=="object"&&"Dispose"in cf)cf.Dispose();}return[T.append(ca,n.choose(function(ci){return cc(ci[0],ci[1],ci[2]);},cb)),{$:0,$0:cd}];};u=g.Var=b7.Class({},f,u);u.New=b7.Ctor(function(){f.New.call(this);},u);v=g.ConcreteVar=b7.Class({Get:function(){return this.current;},Set:function(b$){if(this.isConst)(function(ca){return ca("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(ca){b8.log(ca);}));else{w.Obsolete(this.snap);this.current=b$;this.snap=w.New({$:2,$0:b$,$1:[]});}},SetFinal:function(b$){if(this.isConst)(function(ca){return ca("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(ca){b8.log(ca);}));else{w.Obsolete(this.snap);this.isConst=true;this.current=b$;this.snap=w.New({$:0,$0:b$});}},get_View:function(){return this.view;},UpdateMaybe:function(b$){var ca;ca=b$(this.Get());if(ca!=null&&ca.$==1)this.Set(ca.$0);}},u,v);v.New=b7.Ctor(function(b$,ca,cb){var cc;cc=this;u.New.call(this);this.isConst=b$;this.current=cb;this.snap=ca;this.view=function(){return cc.snap;};this.id=L.Int();},v);w.Map=function(b$,ca){var cb,cc;cb=ca.s;return cb!=null&&cb.$==0?w.New({$:0,$0:b$(cb.$0)}):(cc=w.New({$:3,$0:[],$1:[]}),(w.When(ca,function(cd){w.MarkDone(cc,ca,b$(cd));},cc),cc));};w.WhenRun=function(b$,ca,cb){var cc;cc=b$.s;if(cc==null)cb();else cc!=null&&cc.$==2?(cc.$1.push(cb),ca(cc.$0)):cc!=null&&cc.$==3?(cc.$0.push(ca),cc.$1.push(cb)):ca(cc.$0);};w.WhenObsoleteRun=function(b$,ca){var cb;cb=b$.s;if(cb==null)ca();else cb!=null&&cb.$==2?cb.$1.push(ca):cb!=null&&cb.$==3?cb.$1.push(ca):void 0;};w.When=function(b$,ca,cb){var cc;cc=b$.s;if(cc==null)w.Obsolete(cb);else cc!=null&&cc.$==2?(w.EnqueueSafe(cc.$1,cb),ca(cc.$0)):cc!=null&&cc.$==3?(cc.$0.push(ca),w.EnqueueSafe(cc.$1,cb)):ca(cc.$0);};w.MarkDone=function(b$,ca,cb){var cc;if(cc=ca.s,cc!=null&&cc.$==0)w.MarkForever(b$,cb);else w.MarkReady(b$,cb);};w.Map3=function(b$,ca,cb,cc){var cd,ce,cf,cg;function ch(ci){var cj,ck,cl,cm;if(!(cj=cg.s,cj!=null&&cj.$==0||cj!=null&&cj.$==2)){ck=w.ValueAndForever(ca);cl=w.ValueAndForever(cb);cm=w.ValueAndForever(cc);if(ck!=null&&ck.$==1)cl!=null&&cl.$==1?cm!=null&&cm.$==1?ck.$0[1]&&cl.$0[1]&&cm.$0[1]?w.MarkForever(cg,b$(ck.$0[0],cl.$0[0],cm.$0[0])):w.MarkReady(cg,b$(ck.$0[0],cl.$0[0],cm.$0[0])):void 0:void 0;}}cd=ca.s;ce=cb.s;cf=cc.s;return cd!=null&&cd.$==0?ce!=null&&ce.$==0?cf!=null&&cf.$==0?w.New({$:0,$0:b$(cd.$0,ce.$0,cf.$0)}):w.Map3Opt1(b$,cd.$0,ce.$0,cc):cf!=null&&cf.$==0?w.Map3Opt2(b$,cd.$0,cf.$0,cb):w.Map3Opt3(b$,cd.$0,cb,cc):ce!=null&&ce.$==0?cf!=null&&cf.$==0?w.Map3Opt4(b$,ce.$0,cf.$0,ca):w.Map3Opt5(b$,ce.$0,ca,cc):cf!=null&&cf.$==0?w.Map3Opt6(b$,cf.$0,ca,cb):(cg=w.New({$:3,$0:[],$1:[]}),(w.When(ca,ch,cg),w.When(cb,ch,cg),w.When(cc,ch,cg),cg));};w.Sequence=function(b$){var ca,cb,cc;function cd(ce){var cf;if(cc[0]===0){cf=n.map(function(cg){var ch;ch=cg.s;return ch!=null&&ch.$==0?ch.$0:ch!=null&&ch.$==2?ch.$0:i.FailWith("value not found by View.Sequence");},ca);if(n.forall(function(cg){var ch;ch=cg.s;return ch!=null&&ch.$==0;},ca))w.MarkForever(cb,cf);else w.MarkReady(cb,cf);}else cc[0]=cc[0]-1;}ca=n.ofSeq(b$);return ca.length==0?w.New({$:0,$0:[]}):(cb=w.New({$:3,$0:[],$1:[]}),(cc=[n.length(ca)-1],(n.iter(function(ce){w.When(ce,cd,cb);},ca),cb)));};w.Map2=function(b$,ca,cb){var cc,cd,ce;function cf(cg){var ch,ci,cj;if(!(ch=ce.s,ch!=null&&ch.$==0||ch!=null&&ch.$==2)){ci=w.ValueAndForever(ca);cj=w.ValueAndForever(cb);if(ci!=null&&ci.$==1)cj!=null&&cj.$==1?ci.$0[1]&&cj.$0[1]?w.MarkForever(ce,b$(ci.$0[0],cj.$0[0])):w.MarkReady(ce,b$(ci.$0[0],cj.$0[0])):void 0;}}cc=ca.s;cd=cb.s;return cc!=null&&cc.$==0?cd!=null&&cd.$==0?w.New({$:0,$0:b$(cc.$0,cd.$0)}):w.Map2Opt1(b$,cc.$0,cb):cd!=null&&cd.$==0?w.Map2Opt2(b$,cd.$0,ca):(ce=w.New({$:3,$0:[],$1:[]}),(w.When(ca,cf,ce),w.When(cb,cf,ce),ce));};w.Map2Unit=function(b$,ca){var cb,cc,cd;function ce(){var cf,cg,ch;if(!(cf=cd.s,cf!=null&&cf.$==0||cf!=null&&cf.$==2)){cg=w.ValueAndForever(b$);ch=w.ValueAndForever(ca);if(cg!=null&&cg.$==1)ch!=null&&ch.$==1?cg.$0[1]&&ch.$0[1]?w.MarkForever(cd,null):w.MarkReady(cd,null):void 0;}}cb=b$.s;cc=ca.s;return cb!=null&&cb.$==0?cc!=null&&cc.$==0?w.New({$:0,$0:null}):ca:cc!=null&&cc.$==0?b$:(cd=w.New({$:3,$0:[],$1:[]}),(w.When(b$,ce,cd),w.When(ca,ce,cd),cd));};w.Copy=function(b$){var ca,cb,cc;ca=b$.s;return ca==null?b$:ca!=null&&ca.$==2?(cb=w.New({$:2,$0:ca.$0,$1:[]}),(w.WhenObsolete(b$,cb),cb)):ca!=null&&ca.$==3?(cc=w.New({$:3,$0:[],$1:[]}),(w.When(b$,function(cd){w.MarkDone(cc,b$,cd);},cc),cc)):b$;};w.EnqueueSafe=function(b$,ca){var cb,cc,cd,ce;b$.push(ca);if(b$.length%20===0){cb=b$.slice(0);bZ.Clear(b$);for(cc=0,cd=n.length(cb)-1;cc<=cd;cc++){ce=n.get(cb,cc);if(typeof ce=="object")(function(cf){if(cf.s)b$.push(cf);}(ce));else(function(cf){b$.push(cf);}(ce));}}else void 0;};w.MarkForever=function(b$,ca){var cb,cc,cd,ce;cb=b$.s;if(cb!=null&&cb.$==3){b$.s={$:0,$0:ca};cc=cb.$0;for(cd=0,ce=n.length(cc)-1;cd<=ce;cd++)(n.get(cc,cd))(ca);}else void 0;};w.MarkReady=function(b$,ca){var cb,cc,cd,ce;cb=b$.s;if(cb!=null&&cb.$==3){b$.s={$:2,$0:ca,$1:cb.$1};cc=cb.$0;for(cd=0,ce=n.length(cc)-1;cd<=ce;cd++)(n.get(cc,cd))(ca);}else void 0;};w.Join=function(b$){var ca;ca=w.New({$:3,$0:[],$1:[]});w.When(b$,function(cb){var cc;cc=cb();w.When(cc,function(cd){var ce,cf;if((ce=cc.s,ce!=null&&ce.$==0)&&(cf=b$.s,cf!=null&&cf.$==0))w.MarkForever(ca,cd);else w.MarkReady(ca,cd);},ca);},ca);return ca;};w.Map3Opt1=function(b$,ca,cb,cc){return w.Map(function(cd){return b$(ca,cb,cd);},cc);};w.Map3Opt2=function(b$,ca,cb,cc){return w.Map(function(cd){return b$(ca,cd,cb);},cc);};w.Map3Opt3=function(b$,ca,cb,cc){return w.Map2(function(cd,ce){return b$(ca,cd,ce);},cb,cc);};w.Map3Opt4=function(b$,ca,cb,cc){return w.Map(function(cd){return b$(cd,ca,cb);},cc);};w.Map3Opt5=function(b$,ca,cb,cc){return w.Map2(function(cd,ce){return b$(cd,ca,ce);},cb,cc);};w.Map3Opt6=function(b$,ca,cb,cc){return w.Map2(function(cd,ce){return b$(cd,ce,ca);},cb,cc);};w.ValueAndForever=function(b$){var ca;ca=b$.s;return ca!=null&&ca.$==0?{$:1,$0:[ca.$0,true]}:ca!=null&&ca.$==2?{$:1,$0:[ca.$0,false]}:null;};w.Map2Opt1=function(b$,ca,cb){return w.Map(function(cc){return b$(ca,cc);},cb);};w.Map2Opt2=function(b$,ca,cb){return w.Map(function(cc){return b$(cc,ca);},cb);};w.WhenObsolete=function(b$,ca){var cb;cb=b$.s;if(cb==null)w.Obsolete(ca);else cb!=null&&cb.$==2?w.EnqueueSafe(cb.$1,ca):cb!=null&&cb.$==3?w.EnqueueSafe(cb.$1,ca):void 0;};y=x.VarStr=b7.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith.get_View()};},AddAttribute:function(b$,ca){(b$(ca))(br.Value(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Q.Map(a.String,this.fillWith.get_View())};}},q,y);y.New=b7.Ctor(function(b$,ca){q.New.call(this);this.name=b$;this.fillWith=ca;},y);z=x.Elt=b7.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},q,z);z.New=b7.Ctor(function(b$,ca){q.New.call(this);this.name=b$;this.fillWith=ca;},z);B.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(b$){var ca,cb;ca=b9.random()*16|0;cb=b$=="x"?ca:ca&3|8;return cb.toString(16);});};C.$cctor=function(){C.$cctor=a.ignore;C.People=p.FromSeq(["John","Paul"]);};D=x.Text=b7.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;},get_AsChoiceView:function(){return{$:0,$0:this.fillWith};}},q,D);D.New=b7.Ctor(function(b$,ca){q.New.call(this);this.name=b$;this.fillWith=ca;},D);E=x.EventQ=b7.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},q,E);E.New=b7.Ctor(function(b$,ca){q.New.call(this);this.name=b$;this.fillWith=ca;},E);G.NewFromSeq=function(b$){var ca,cb,cc;ca={};cb=_3.Get(b$);try{while(cb.MoveNext()){cc=cb.Current();ca[cc[0]]=cc[1];}}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}return ca;};I.LoadLocalTemplates=function(b$){!I.LocalTemplatesLoaded()?(I.set_LocalTemplatesLoaded(true),I.LoadNestedTemplates(self.document.body,"")):void 0;I.LoadedTemplates().set_Item(b$,I.LoadedTemplateFile(""));};I.NamedTemplate=function(b$,ca,cb){var cc,cd;cc=(cd=null,[I.LoadedTemplateFile(b$).TryGetValue(ca==null?"":ca.$0,{get:function(){return cd;},set:function(ce){cd=ce;}}),cd]);return cc[0]?I.ChildrenTemplate(cc[1].cloneNode(true),cb):(b8.warn("Local template doesn't exist",ca),J.get_Empty());};I.LocalTemplatesLoaded=function(){_6.$cctor();return _6.LocalTemplatesLoaded;};I.set_LocalTemplatesLoaded=function(b$){_6.$cctor();_6.LocalTemplatesLoaded=b$;};I.LoadNestedTemplates=function(b$,ca){var cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw;function cb(cx){var cy,cz;if(!cc.ContainsKey(cx)){cy=(cz=null,[cd.TryGetValue(cx,{get:function(){return cz;},set:function(cA){cz=cA;}}),cz]);if(cy[0]){cw.SAdd(cx);cd.RemoveKey(cx);I.PrepareTemplateStrict(ca,{$:1,$0:cx},cy[1],{$:1,$0:cb});}else b8.warn(cw.Contains(cx)?"Encountered loop when instantiating "+cx:"Local template does not exist: "+cx);}}cc=I.LoadedTemplateFile(ca);cd=new N.New$5();ce=b$.querySelectorAll("[ws-template]");for(cf=0,cg=ce.length-1;cf<=cg;cf++){ch=ce[cf];ci=ch.getAttribute("ws-template").toLowerCase();ch.removeAttribute("ws-template");cd.set_Item(ci,I.FakeRootSingle(ch));}cj=b$.querySelectorAll("[ws-children-template]");for(ck=0,cl=cj.length-1;ck<=cl;ck++){cm=cj[ck];cn=cm.getAttribute("ws-children-template").toLowerCase();cm.removeAttribute("ws-children-template");cd.set_Item(cn,I.FakeRoot(cm));}co=b$.querySelectorAll("template[id]");for(cp=0,cq=co.length-1;cp<=cq;cp++){cr=co[cp];cd.set_Item(cr.getAttribute("id").toLowerCase(),I.FakeRootFromHTMLTemplate(cr));}cs=b$.querySelectorAll("template[name]");for(ct=0,cu=cs.length-1;ct<=cu;ct++){cv=cs[ct];cd.set_Item(cv.getAttribute("name").toLowerCase(),I.FakeRootFromHTMLTemplate(cv));}cw=new S.New$3();while(cd.count>0)cb(T.head(cd.Keys()));};I.LoadedTemplates=function(){_6.$cctor();return _6.LoadedTemplates;};I.LoadedTemplateFile=function(b$){var ca,cb,cc;ca=(cb=null,[I.LoadedTemplates().TryGetValue(b$,{get:function(){return cb;},set:function(cd){cb=cd;}}),cb]);return ca[0]?ca[1]:(cc=new N.New$5(),(I.LoadedTemplates().set_Item(b$,cc),cc));};I.ChildrenTemplate=function(b$,ca){var cb,cc,cd,ce,cf;cb=I.InlineTemplate(b$,T.append(ca,I.GlobalHoles().Values()));cc=cb[1];cd=cb[0];ce=cd.Els;return!r.Equals(ce,null)&&ce.length===1&&(n.get(ce,0)instanceof P&&(r.Equals(n.get(ce,0).nodeType,P.ELEMENT_NODE)&&(cf=n.get(ce,0),true)))?bb.TreeNode(cd,cc):J.Mk({$:6,$0:cd},cc);};I.FakeRootSingle=function(b$){var ca,cb,cc,cd;b$.removeAttribute("ws-template");ca=b$.getAttribute("ws-replace");if(ca==null);else{b$.removeAttribute("ws-replace");cb=b$.parentNode;r.Equals(cb,null)?void 0:(cc=self.document.createElement(b$.tagName),cc.setAttribute("ws-replace",ca),cb.replaceChild(cc,b$));}cd=self.document.createElement("div");cd.appendChild(b$);return cd;};I.FakeRoot=function(b$){var ca;ca=self.document.createElement("div");while(b$.hasChildNodes())ca.appendChild(b$.firstChild);return ca;};I.FakeRootFromHTMLTemplate=function(b$){var ca,cb,cc,cd;ca=self.document.createElement("div");cb=b$.content;for(cc=0,cd=cb.childNodes.length-1;cc<=cd;cc++)ca.appendChild(cb.childNodes[cc].cloneNode(true));return ca;};I.PrepareTemplateStrict=function(b$,ca,cb,cc){var cd,ce;function cf(cl,cm){var cn,co,cp,cq,cr,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN;function cs(cO){}while(true)switch(cl){case 0:if(cm!==null){cn=cm.nextSibling;if(r.Equals(cm.nodeType,P.TEXT_NODE))bd.convertTextNode(cm);else if(r.Equals(cm.nodeType,P.ELEMENT_NODE))ch(cm);cm=cn;}else return null;break;case 1:ct=be.string(cm.nodeName,{$:1,$0:3},null).toLowerCase();cu=(co=ct.indexOf("."),co===-1?[b$,ct]:[be.string(ct,null,{$:1,$0:co-1}),be.string(ct,{$:1,$0:co+1},null)]);cv=cu[1];cw=cu[0];if(cw!=""&&!I.LoadedTemplates().ContainsKey(cw))return bd.failNotLoaded(cv);else{if(cw==""&&cc!=null)cc.$0(cv);cx=I.LoadedTemplates().Item(cw);if(!cx.ContainsKey(cv))return bd.failNotLoaded(cv);else{cy=cx.Item(cv);cz=cy.cloneNode(true);cA=new S.New$3();cB=new N.New$5();cC=cm.attributes;for(cD=0,cE=cC.length-1;cD<=cE;cD++){cF=cC.item(cD).name.toLowerCase();cB.set_Item(cF,(cG=cC.item(cD).nodeValue,cG==""?cF:cG.toLowerCase()));if(!cA.SAdd(cF))b8.warn("Hole mapped twice",cF);}for(cH=0,cI=cm.childNodes.length-1;cH<=cI;cH++){cJ=cm.childNodes[cH];if(r.Equals(cJ.nodeType,P.ELEMENT_NODE))!cA.SAdd(cJ.nodeName.toLowerCase())?b8.warn("Hole filled twice",cv):void 0;}cK=cm.childNodes.length===1&&r.Equals(cm.firstChild.nodeType,P.TEXT_NODE);if(cK){cq=bd.fillTextHole(cz,cm.firstChild.textContent,cv);((function(cO){return function(cP){if(cP!=null)cO(cP.$0);};}((cr=function(cO){return function(cP){return cO.SAdd(cP);};}(cA),function(cO){return cs(cr(cO));})))(cq));}bd.removeHolesExcept(cz,cA);if(!cK){for(cL=0,cM=cm.childNodes.length-1;cL<=cM;cL++){cN=cm.childNodes[cL];if(r.Equals(cN.nodeType,P.ELEMENT_NODE))cN.hasAttributes()?bd.fillInstanceAttrs(cz,cN):cg(cz,cN);}}bd.mapHoles(cz,cB);bd.fill(cz,cm.parentNode,cm);cm.parentNode.removeChild(cm);return;}}break;}}function cg(cl,cm){var cn,co,cq,cr;function cp(cs,ct){var cu;if(cq=="title"&&cm.hasChildNodes()){cu=bf.ParseHTMLIntoFakeRoot(cm.textContent);cm.removeChild(cm.firstChild);while(cu.hasChildNodes())cm.appendChild(cu.firstChild);}else null;ch(cm);return bd.fill(cm,cs,ct);}cq=cm.nodeName.toLowerCase();I.foreachNotPreserved(cl,"[ws-attr-holes]",function(cs){var ct,cu,cv,cw,cx;ct=bx.SplitChars(cs.getAttribute("ws-attr-holes"),[" "],1);for(cu=0,cv=ct.length-1;cu<=cv;cu++){cw=n.get(ct,cu);cs.setAttribute(cw,(cx=new a.RegExp("\\${"+cq+"}","ig"),cs.getAttribute(cw).replace(cx,cm.textContent)));}});cr=cl.querySelector("[ws-hole="+cq+"]");if(r.Equals(cr,null)){cn=cl.querySelector("[ws-replace="+cq+"]");return r.Equals(cn,null)?(co=cl.querySelector("slot[name="+cq+"]"),cl.tagName.toLowerCase()=="template"?(cp(co.parentNode,co),void co.parentNode.removeChild(co)):null):(cp(cn.parentNode,cn),void cn.parentNode.removeChild(cn));}else{while(cr.hasChildNodes())cr.removeChild(cr.lastChild);cr.removeAttribute("ws-hole");return cp(cr,null);}}function ch(cl){if(!cl.hasAttribute("ws-preserve"))if(bx.StartsWith(cl.nodeName.toLowerCase(),"ws-"))cj(cl);else{bd.convertAttrs(cl);ci(cl.firstChild);}}function ci(cl){return cf(0,cl);}function cj(cl){return cf(1,cl);}function ck(cl){var cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx;while(true){cm=cl.querySelector("[ws-template]");if(r.Equals(cm,null)){cn=cl.querySelector("[ws-children-template]");if(r.Equals(cn,null)){co=cl.querySelectorAll("template[id]");for(cp=1,cq=co.length-1;cp<=cq;cp++){cr=co[cp];if(cd.Contains(cr));else{I.PrepareTemplateStrict(b$,{$:1,$0:cr.getAttribute("id")},cr,null);cd.SAdd(cr);}}cs=cl.querySelectorAll("template[name]");for(ct=1,cu=cs.length-1;ct<=cu;ct++){cv=cs[ct];if(cd.Contains(cv));else{I.PrepareTemplateStrict(b$,{$:1,$0:cv.getAttribute("name")},cv,null);cd.SAdd(cv);}}return null;}else{cw=cn.getAttribute("ws-children-template");cn.removeAttribute("ws-children-template");I.PrepareTemplateStrict(b$,{$:1,$0:cw},cn,null);cl=cl;}}else{cx=cm.getAttribute("ws-template");(I.PrepareSingleTemplate(b$,{$:1,$0:cx},cm))(null);cl=cl;}}}cd=new S.New$3();ce=(ca==null?"":ca.$0).toLowerCase();I.LoadedTemplateFile(b$).set_Item(ce,cb);if(cb.hasChildNodes()){ck(cb);ci(cb.firstChild);}};I.InlineTemplate=function(b$,ca){var cb,cc,cd,ce,cf,cj,ck,cl,cm,cn,co,cp;function cg(cq,cr){var cs,ct,cu;cs=bo.Insert(cq,cr);ck.push(bo.Updates(cs));cl.push([cq,cs]);ct=b7.GetOptional(cs.OnAfterRender);return ct==null?null:(cu=ct.$0,void cm.push(function(){cu(cq);}));}function ch(cq){var cr,cs,ct,cu;cr=(cs=null,[cn.TryGetValue(cq,{get:function(){return cs;},set:function(cv){cs=cv;}}),cs]);return cr[0]?(ct=cr[1],ct instanceof z?{$:1,$0:ct.get_Value()}:ct instanceof D?{$:1,$0:J.TextNode(ct.get_Value())}:(cu=ct.ForTextView(),cu==null?null:{$:1,$0:J.TextView(cu.$0)})):null;}function ci(){I.foreachNotPreservedwsDOM("[ws-dom]",function(cq){var cr,cs,ct,cu,cv,cw,cx;cr=(cs=null,[cn.TryGetValue(cq.getAttribute("ws-dom").toLowerCase(),{get:function(){return cs;},set:function(cy){cs=cy;}}),cs]);if(cr[0]){ct=cr[1];ct instanceof _0?(cu=ct.get_Value(),cq.removeAttribute("ws-dom"),cv=cq,cw=new a.MutationObserver(function(cy,cz){n.iter(function(cA){function cB(cC,cD,cE,cF){if(cC===cv&&cA.addedNodes.length!==1){cu.SetFinal(null);cz.disconnect();}}cA.removedNodes.forEach(b7.CreateFuncWithArgs(function(cC){return cB(cC[0],cC[1],cC[2],cC[3]);}),null);},cy);}),cq.parentElement!==null?cw.observe(cq.parentElement,(cx={},cx.childList=true,cx)):void 0,cu.Set({$:1,$0:cq}),Q.Sink(function(cy){var cz;if(cy!=null&&cy.$==1){cz=cy.$0;if(cv===cz);else{cv.replaceWith.apply(cv,[cz]);cv=cz;}}else{cv.remove();cw.disconnect();}},cu.get_View())):void 0;}});}cj=[];ck=[];cl=[];cm=[];cn=new N.New$5();co=_3.Get(ca);try{while(co.MoveNext()){cp=co.Current();cn.set_Item(cp.get_Name(),cp);}}finally{if(typeof co=="object"&&"Dispose"in co)co.Dispose();}cb=bf.ChildrenArray(b$);I.foreachNotPreserved(b$,"[ws-hole]",function(cq){var cr,cs,ct;ct=cq.getAttribute("ws-hole");cq.removeAttribute("ws-hole");while(cq.hasChildNodes())cq.removeChild(cq.lastChild);cr=ch(ct);if(cr!=null&&cr.$==1){cs=cr.$0;_7.LinkElement(cq,cs.docNode);cj.push(_9.New(bo.Empty(cq),cs.docNode,null,cq,L.Int(),null));ck.push(cs.updates);}});I.foreachNotPreserved(b$,"[ws-replace]",function(cq){var cr,cs,ct,cu,cv,cw;cr=ch(cq.getAttribute("ws-replace"));if(cr!=null&&cr.$==1){cs=cr.$0;ct=cq.parentNode;cu=self.document.createTextNode("");ct.replaceChild(cu,cq);cv=_7.InsertBeforeDelim(cu,cs.docNode);cw=n.tryFindIndex(function(cx){return cq===cx;},cb);cw==null?void 0:n.set(cb,cw.$0,cs.docNode);cj.push(_9.New(bo.Empty(ct),cs.docNode,{$:1,$0:[cv,cu]},ct,L.Int(),null));ck.push(cs.updates);}});cc=false;I.foreachNotPreserved(b$,"slot",function(cq){var cr,cs,ct,cu;ct=cq.getAttribute("name");cu=ct==""||ct==null?"default":ct.toLowerCase();if(cc&&cu=="default"||!r.Equals(b$.parentElement,null))void 0;else{while(cq.hasChildNodes())cq.removeChild(cq.lastChild);if(cu=="default")cc=true;cr=ch(cu);if(cr!=null&&cr.$==1){cs=cr.$0;_7.LinkElement(cq,cs.docNode);cj.push(_9.New(bo.Empty(cq),cs.docNode,null,cq,L.Int(),null));ck.push(cs.updates);}}});I.foreachNotPreserved(b$,"[ws-attr]",function(cq){var cr,cs,ct,cu;cr=cq.getAttribute("ws-attr");cq.removeAttribute("ws-attr");cs=(ct=null,[cn.TryGetValue(cr,{get:function(){return ct;},set:function(cv){ct=cv;}}),ct]);if(cs[0]){cu=cs[1];cu instanceof bp?cg(cq,cu.get_Value()):b8.warn("Attribute hole filled with non-attribute data",cr);}});I.foreachNotPreserved(b$,"[ws-on]",function(cq){cg(cq,bs.Concat(n.choose(function(cr){var cs,ct,cu,cv;cs=bx.SplitChars(cr,[":"],1);ct=(cu=null,[cn.TryGetValue(n.get(cs,1),{get:function(){return cu;},set:function(cw){cu=cw;}}),cu]);return ct[0]?(cv=ct[1],cv instanceof bq?{$:1,$0:br.Handler(n.get(cs,0),cv.get_Value())}:cv instanceof E?{$:1,$0:bs.Handler(n.get(cs,0),cv.get_Value())}:(b8.warn("Event hole on"+n.get(cs,0)+" filled with non-event data",n.get(cs,1)),null)):null;},bx.SplitChars(cq.getAttribute("ws-on"),[" "],1))));cq.removeAttribute("ws-on");});I.foreachNotPreserved(b$,"[ws-onafterrender]",function(cq){var cr,cs,ct,cu;cr=cq.getAttribute("ws-onafterrender");cs=(ct=null,[cn.TryGetValue(cr,{get:function(){return ct;},set:function(cv){ct=cv;}}),ct]);if(cs[0]){cu=cs[1];cu instanceof bt?(cq.removeAttribute("ws-onafterrender"),cg(cq,br.OnAfterRender(cu.get_Value()))):cu instanceof bu?(cq.removeAttribute("ws-onafterrender"),cg(cq,br.OnAfterRender(cu.get_Value()))):b8.warn("onafterrender hole filled with non-onafterrender data",cr);}});I.foreachNotPreserved(b$,"[ws-var]",function(cq){var cr,cs,ct;cr=cq.getAttribute("ws-var");cq.removeAttribute("ws-var");cs=(ct=null,[cn.TryGetValue(cr,{get:function(){return ct;},set:function(cu){ct=cu;}}),ct]);if(cs[0])cs[1].AddAttribute(function(cu){return function(cv){return cg(cu,cv);};},cq);});I.foreachNotPreserved(b$,"[ws-attr-holes]",function(cq){var cr,cs,ct,cu;cr=new a.RegExp(I.TextHoleRE(),"g");cs=bx.SplitChars(cq.getAttribute("ws-attr-holes"),[" "],1);cq.removeAttribute("ws-attr-holes");for(ct=0,cu=cs.length-1;ct<=cu;ct++)(function(){var cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH;cE=n.get(cs,ct);cF=cq.getAttribute(cE);cv=null;cw=0;cG=[];while(cv=cr.exec(cF),cv!==null){cH=be.string(cF,{$:1,$0:cw},{$:1,$0:cr.lastIndex-n.get(cv,0).length-1});cw=cr.lastIndex;cG.push([cH,n.get(cv,1)]);}cy=be.string(cF,{$:1,$0:cw},null);cr.lastIndex=0;cz=n.foldBack(function(cI,cJ){return(function(cK){var cL,cM;cL=cK[0];cM=cK[1];return function(cN){var cO,cP,cQ,cR,cS;cO=cN[0];cP=cN[1];cQ=(cR=(cS=null,[cn.TryGetValue(cM,{get:function(){return cS;},set:function(cT){cS=cT;}}),cS]),cR[0]?cR[1].get_AsChoiceView():{$:0,$0:""});return cQ.$==1?[cL,new bw({$:1,$0:cO==""?cQ.$0:Q.Map(function(cT){return cT+cO;},cQ.$0),$1:cP})]:[cL+cQ.$0+cO,cP];};}(cI))(cJ);},cG,[cy,bw.Empty]);return cg(cq,cz[1].$==1?cz[1].$1.$==1?cz[1].$1.$1.$==1?cz[1].$1.$1.$1.$==0?(cA=cz[0],br.Dynamic(cE,Q.Map3(function(cI,cJ,cK){return cA+cI+cJ+cK;},cz[1].$0,cz[1].$1.$0,cz[1].$1.$1.$0))):(cB=cz[0],br.Dynamic(cE,Q.Map(function(cI){return cB+bx.concat("",cI);},Q.Sequence(cz[1])))):(cC=cz[0],br.Dynamic(cE,Q.Map2(function(cI,cJ){return cC+cI+cJ;},cz[1].$0,cz[1].$1.$0))):cz[0]==""?br.Dynamic(cE,cz[1].$0):(cD=cz[0],br.Dynamic(cE,Q.Map(function(cI){return cD+cI;},cz[1].$0))):bs.Create(cE,cz[0]));}());});return[b7.DeleteEmptyFields({Els:cb,Dirty:true,Holes:cj,Attrs:cl,Render:(cd=cm.length==0?{$:1,$0:function(){ci();}}:{$:1,$0:function(cq){ci();n.iter(function(cr){cr(cq);},cm);}},cd?cd.$0:void 0),El:(ce=!r.Equals(cb,null)&&cb.length===1&&(n.get(cb,0)instanceof P&&(n.get(cb,0)instanceof bc&&(cf=n.get(cb,0),true)))?{$:1,$0:cf}:null,ce?ce.$0:void 0)},["Render","El"]),bm.TreeReduce(Q.Const(),Q.Map2Unit,ck)];};I.GlobalHoles=function(){_6.$cctor();return _6.GlobalHoles;};I.foreachNotPreserved=function(b$,ca,cb){bf.IterSelector(b$,ca,function(cc){if(cc.closest("[ws-preserve]")==null)cb(cc);});};I.PrepareSingleTemplate=function(b$,ca,cb){var cc;cc=I.FakeRootSingle(cb);return function(cd){I.PrepareTemplateStrict(b$,ca,cc,cd);};};I.foreachNotPreservedwsDOM=function(b$,ca){bf.IterSelectorDoc(b$,function(cb){if(cb.closest("[ws-preserve]")==null)ca(cb);});};I.TextHoleRE=function(){_6.$cctor();return _6.TextHoleRE;};J=g.Doc=b7.Class({},f,J);J.RunById=function(b$,ca){var cb;cb=self.document.getElementById(b$);if(r.Equals(cb,null))i.FailWith("invalid id: "+b$);else J.Run(cb,ca);};J.Convert=function(b$,ca){return J.Flatten(Q.MapSeqCached(b$,ca));};J.Run=function(b$,ca){_7.LinkElement(b$,ca.docNode);J.RunInPlace(false,b$,ca);};J.Flatten=function(b$){return J.EmbedView(Q.Map(J.Concat,b$));};J.get_Empty=function(){return J.Mk(null,Q.Const());};J.RunInPlace=function(b$,ca,cb){var cc;cc=_7.CreateRunState(ca,cb.docNode);Q.Sink(bh.get_UseAnimations()||bi.BatchUpdatesEnabled()?bj.StartProcessor(_7.PerformAnimatedUpdate(b$,cc,cb.docNode)):function(){_7.PerformSyncUpdate(b$,cc,cb.docNode);},cb.updates);};J.Concat=function(b$){var ca;ca=bm.ofSeqNonCopying(b$);return bm.TreeReduce(J.get_Empty(),J.Append,ca);};J.EmbedView=function(b$){var ca;ca=_7.CreateEmbedNode();return J.Mk({$:2,$0:ca},Q.Map(a.ignore,Q.Bind(function(cb){_7.UpdateEmbedNode(ca,cb.docNode);return cb.updates;},b$)));};J.Mk=function(b$,ca){return new J.New(b$,ca);};J.Append=function(b$,ca){return J.Mk({$:0,$0:b$.docNode,$1:ca.docNode},Q.Map2Unit(b$.updates,ca.updates));};J.TextNode=function(b$){return J.Mk({$:5,$0:self.document.createTextNode(b$)},Q.Const());};J.TextView=function(b$){var ca;ca=_7.CreateTextNode();return J.Mk({$:4,$0:ca},Q.Map(function(cb){_7.UpdateTextNode(ca,cb);},b$));};J.New=b7.Ctor(function(b$,ca){f.New.call(this);this.docNode=b$;this.updates=ca;},J);L.Int=function(){L.set_counter(L.counter()+1);return L.counter();};L.set_counter=function(b$){_8.$cctor();_8.counter=b$;};L.counter=function(){_8.$cctor();return _8.counter;};N=M.Dictionary=b7.Class({set_Item:function(b$,ca){this.set(b$,ca);},set:function(b$,ca){var cb,cc,cd,ce;cb=this;cc=this.hash(b$);cd=this.data[cc];if(cd==null){this.count=this.count+1;this.data[cc]=new a.Array({K:b$,V:ca});}else{ce=n.tryFindIndex(function(cf){return cb.equals.apply(null,[(i.KeyValue(cf))[0],b$]);},cd);ce==null?(this.count=this.count+1,cd.push({K:b$,V:ca})):cd[ce.$0]={K:b$,V:ca};}},TryGetValue:function(b$,ca){var cb,cc,cd;cb=this;cc=this.data[this.hash(b$)];return cc==null?false:(cd=n.tryPick(function(ce){var cf;cf=i.KeyValue(ce);return cb.equals.apply(null,[cf[0],b$])?{$:1,$0:cf[1]}:null;},cc),cd!=null&&cd.$==1&&(ca.set(cd.$0),true));},RemoveKey:function(b$){return this.remove(b$);},ContainsKey:function(b$){var ca,cb;ca=this;cb=this.data[this.hash(b$)];return cb==null?false:n.exists(function(cc){return ca.equals.apply(null,[(i.KeyValue(cc))[0],b$]);},cb);},Keys:function(){return new bg.New(this);},GetEnumerator:function(){return _3.Get0(n.concat(Z.GetFieldValues(this.data)));},Values:function(){return new bz.New(this);},remove:function(b$){var ca,cb,cc,cd;ca=this;cb=this.hash(b$);cc=this.data[cb];return cc==null?false:(cd=n.filter(function(ce){return!ca.equals.apply(null,[(i.KeyValue(ce))[0],b$]);},cc),n.length(cd)<cc.length&&(this.count=this.count-1,this.data[cb]=cd,true));},Item:function(b$){return this.get(b$);},get:function(b$){var ca,cb;ca=this;cb=this.data[this.hash(b$)];return cb==null?_2.notPresent():n.pick(function(cc){var cd;cd=i.KeyValue(cc);return ca.equals.apply(null,[cd[0],b$])?{$:1,$0:cd[1]}:null;},cb);}},f,N);N.New$5=b7.Ctor(function(){N.New$6.call(this,[],r.Equals,r.Hash);},N);N.New$6=b7.Ctor(function(b$,ca,cb){var cc,cd;f.New.call(this);this.equals=ca;this.hash=cb;this.count=0;this.data=[];cc=_3.Get(b$);try{while(cc.MoveNext()){cd=cc.Current();this.set(cd.K,cd.V);}}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}},N);Q=g.View=b7.Class({},null,Q);w.Obsolete=function(b$){var ca,cb,cc,cd,ce;cb=b$.s;if(cb==null||(cb!=null&&cb.$==2?(ca=cb.$1,false):cb!=null&&cb.$==3?(ca=cb.$1,false):true))void 0;else{b$.s=null;for(cc=0,cd=n.length(ca)-1;cc<=cd;cc++){ce=n.get(ca,cc);if(typeof ce=="object")(function(cf){w.Obsolete(cf);}(ce));else ce();}}};w.New=function(b$){return{s:b$};};p.FromSeq=function(b$){return p.Create(a.id,b$);};p.Create=function(b$,ca){return p.CreateWithStorage(b$,$.InMemory(n.ofSeq(ca)));};p.CreateWithStorage=function(b$,ca){return new p.New(b$,ca);};S=M.HashSet=b7.Class({SAdd:function(b$){return this.add(b$);},Contains:function(b$){var ca;ca=this.data[this.hash(b$)];return ca==null?false:this.arrContains(b$,ca);},add:function(b$){var ca,cb;ca=this.hash(b$);cb=this.data[ca];return cb==null?(this.data[ca]=[b$],this.count=this.count+1,true):this.arrContains(b$,cb)?false:(cb.push(b$),this.count=this.count+1,true);},arrContains:function(b$,ca){var cb,cc,cd,ce;cb=true;cc=0;ce=ca.length;while(cb&&cc<ce)if(this.equals.apply(null,[ca[cc],b$]))cb=false;else cc=cc+1;return!cb;},GetEnumerator:function(){return _3.Get(bG.concat(this.data));},ExceptWith:function(b$){var ca;ca=_3.Get(b$);try{while(ca.MoveNext())this.Remove(ca.Current());}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}},Count:function(){return this.count;},IntersectWith:function(b$){var ca,cb,cc,cd,ce;ca=new S.New$4(b$,this.equals,this.hash);cb=bG.concat(this.data);for(cc=0,cd=cb.length-1;cc<=cd;cc++){ce=cb[cc];if(!ca.Contains(ce))this.Remove(ce);}},Remove:function(b$){var ca;ca=this.data[this.hash(b$)];return ca==null?false:this.arrRemove(b$,ca)&&(this.count=this.count-1,true);},CopyTo:function(b$,ca){var cb,cc,cd;cb=bG.concat(this.data);for(cc=0,cd=cb.length-1;cc<=cd;cc++)n.set(b$,cc+ca,cb[cc]);},arrRemove:function(b$,ca){var cb,cc,cd,ce;cb=true;cc=0;ce=ca.length;while(cb&&cc<ce)if(this.equals.apply(null,[ca[cc],b$])){ca.splice.apply(ca,[cc,1]);cb=false;}else cc=cc+1;return!cb;}},f,S);S.New$3=b7.Ctor(function(){S.New$4.call(this,[],r.Equals,r.Hash);},S);S.New$4=b7.Ctor(function(b$,ca,cb){var cc;f.New.call(this);this.equals=ca;this.hash=cb;this.data=[];this.count=0;cc=_3.Get(b$);try{while(cc.MoveNext())this.add(cc.Current());}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}},S);S.New$2=b7.Ctor(function(b$){S.New$4.call(this,b$,r.Equals,r.Hash);},S);T.append=function(b$,ca){return{GetEnumerator:function(){var cb,cc;cb=_3.Get(b$);cc=[true];return new _4.New(cb,null,function(cd){var ce;return cd.s.MoveNext()?(cd.c=cd.s.Current(),true):(ce=cd.s,!r.Equals(ce,null)?ce.Dispose():void 0,cd.s=null,cc[0]&&(cc[0]=false,cd.s=_3.Get(ca),cd.s.MoveNext()?(cd.c=cd.s.Current(),true):(cd.s.Dispose(),cd.s=null,false)));},function(cd){var ce;ce=cd.s;if(!r.Equals(ce,null))ce.Dispose();});}};};T.head=function(b$){var ca;ca=_3.Get(b$);try{return ca.MoveNext()?ca.Current():T.insufficient();}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}};T.fold=function(b$,ca,cb){var cc,cd;cc=ca;cd=_3.Get(cb);try{while(cd.MoveNext())cc=b$(cc,cd.Current());return cc;}finally{if(typeof cd=="object"&&"Dispose"in cd)cd.Dispose();}};T.distinctBy=function(b$,ca){return{GetEnumerator:function(){var cb,cc;cb=_3.Get(ca);cc=new S.New$3();return new _4.New(null,null,function(cd){var ce,cf;if(cb.MoveNext()){ce=cb.Current();cf=cc.SAdd(b$(ce));while(!cf&&cb.MoveNext()){ce=cb.Current();cf=cc.SAdd(b$(ce));}return cf&&(cd.c=ce,true);}else return false;},function(){cb.Dispose();});}};};T.iter=function(b$,ca){var cb;cb=_3.Get(ca);try{while(cb.MoveNext())b$(cb.Current());}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};T.map=function(b$,ca){return{GetEnumerator:function(){var cb;cb=_3.Get(ca);return new _4.New(null,null,function(cc){return cb.MoveNext()&&(cc.c=b$(cb.Current()),true);},function(){cb.Dispose();});}};};T.delay=function(b$){return{GetEnumerator:function(){return _3.Get(b$());}};};T.max=function(b$){var ca,cb,cc;ca=_3.Get(b$);try{if(!ca.MoveNext())T.seqEmpty();cb=ca.Current();while(ca.MoveNext()){cc=ca.Current();if(r.Compare(cc,cb)===1)cb=cc;}return cb;}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}};T.init=function(b$,ca){return T.take(b$,T.initInfinite(ca));};T.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};T.forall=function(b$,ca){return!T.exists(function(cb){return!b$(cb);},ca);};T.take=function(b$,ca){b$<0?T.nonNegative():void 0;return{GetEnumerator:function(){var cb;cb=[_3.Get(ca)];return new _4.New(0,null,function(cc){var cd;cc.s=cc.s+1;return cc.s>b$?false:(cd=cb[0],r.Equals(cd,null)?T.insufficient():cd.MoveNext()?(cc.c=cd.Current(),cc.s===b$?(cd.Dispose(),cb[0]=null):void 0,true):(cd.Dispose(),cb[0]=null,T.insufficient()));},function(){var cc;cc=cb[0];if(!r.Equals(cc,null))cc.Dispose();});}};};T.initInfinite=function(b$){return{GetEnumerator:function(){return new _4.New(0,null,function(ca){ca.c=b$(ca.s);ca.s=ca.s+1;return true;},void 0);}};};T.exists=function(b$,ca){var cb,cc;cb=_3.Get(ca);try{cc=false;while(!cc&&cb.MoveNext())cc=b$(cb.Current());return cc;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}};n.choose=function(b$,ca){var cb,cc,cd,ce;cb=[];for(cc=0,cd=ca.length-1;cc<=cd;cc++){ce=b$(ca[cc]);if(ce==null);else cb.push(ce.$0);}return cb;};n.tryFindIndex=function(b$,ca){var cb,cc;cb=null;cc=0;while(cc<ca.length&&cb==null){b$(ca[cc])?cb={$:1,$0:cc}:void 0;cc=cc+1;}return cb;};n.tryPick=function(b$,ca){var cb,cc,cd;cb=null;cc=0;while(cc<ca.length&&cb==null){cd=b$(ca[cc]);if(cd!=null&&cd.$==1)cb=cd;cc=cc+1;}return cb;};n.exists=function(b$,ca){var cb,cc,cd,ce;cb=false;cc=0;ce=n.length(ca);while(!cb&&cc<ce)if(b$(ca[cc]))cb=true;else cc=cc+1;return cb;};n.concat=function(b$){return a.Array.prototype.concat.apply([],n.ofSeq(b$));};n.ofSeq=function(b$){var ca,cb;if(b$ instanceof a.Array)return b$.slice();else if(b$ instanceof bw)return n.ofList(b$);else{ca=[];cb=_3.Get(b$);try{while(cb.MoveNext())ca.push(cb.Current());return ca;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}}};n.iter=function(b$,ca){var cb,cc;for(cb=0,cc=ca.length-1;cb<=cc;cb++)b$(ca[cb]);};n.foldBack=function(b$,ca,cb){var cc,cd,ce,cf,cg;cc=cb;ce=ca.length;for(cf=1,cg=ce;cf<=cg;cf++)cc=b$(ca[ce-cf],cc);return cc;};n.map=function(b$,ca){var cb,cc,cd;cb=new a.Array(ca.length);for(cc=0,cd=ca.length-1;cc<=cd;cc++)cb[cc]=b$(ca[cc]);return cb;};n.filter=function(b$,ca){var cb,cc,cd;cb=[];for(cc=0,cd=ca.length-1;cc<=cd;cc++)if(b$(ca[cc]))cb.push(ca[cc]);return cb;};n.ofList=function(b$){var ca,cb;cb=[];ca=b$;while(!(ca.$==0)){cb.push(bv.head(ca));ca=bv.tail(ca);}return cb;};n.pick=function(b$,ca){var cb;cb=n.tryPick(b$,ca);return cb==null?i.FailWith("KeyNotFoundException"):cb.$0;};n.forall=function(b$,ca){var cb,cc,cd,ce;cb=true;cc=0;ce=n.length(ca);while(cb&&cc<ce)if(b$(ca[cc]))cc=cc+1;else cb=false;return cb;};n.create=function(b$,ca){var cb,cc,cd;cb=new a.Array(b$);for(cc=0,cd=b$-1;cc<=cd;cc++)cb[cc]=ca;return cb;};n.init=function(b$,ca){var cb,cc,cd;if(b$<0)i.FailWith("Negative size given.");else null;cb=new a.Array(b$);for(cc=0,cd=b$-1;cc<=cd;cc++)cb[cc]=ca(cc);return cb;};U.$cctor=function(){U.$cctor=a.ignore;U.initialized=new N.New$5();};U=l.TemplateInitializer=b7.Class({},f,U);U.GetOrAddHoleFor=function(b$,ca,cb){var cc,cd,ce,cf;U.$cctor();cc=U.GetHolesFor(b$);cd=(ce=null,[cc.TryGetValue(ca,{get:function(){return ce;},set:function(cg){ce=cg;}}),ce]);return cd[0]?cd[1]:(cf=cb(),(cc.set_Item(ca,cf),cf));};U.GetHolesFor=function(b$){var ca,cb,cc;U.$cctor();ca=(cb=null,[U.initialized.TryGetValue(b$,{get:function(){return cb;},set:function(cd){cb=cd;}}),cb]);return ca[0]?ca[1]:(cc=new N.New$5(),(U.initialized.set_Item(b$,cc),cc));};V=x.VarFloatUnchecked=b7.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:Q.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(b$,ca){(b$(ca))(br.FloatValueUnchecked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Q.Map(a.String,this.fillWith.get_View())};}},q,V);V.New=b7.Ctor(function(b$,ca){q.New.call(this);this.name=b$;this.fillWith=ca;},V);W=x.VarBool=b7.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:Q.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(b$,ca){(b$(ca))(br.Checked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Q.Map(a.String,this.fillWith.get_View())};}},q,W);W.New=b7.Ctor(function(b$,ca){q.New.call(this);this.name=b$;this.fillWith=ca;},W);X=x.VarDateTime=b7.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:Q.Map(function(b$){return(new a.Date(b$)).toLocaleString();},this.fillWith.get_View())};},AddAttribute:function(b$,ca){(b$(ca))(br.DateTimeValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Q.Map(function(b$){return(new a.Date(b$)).toLocaleString();},this.fillWith.get_View())};}},q,X);X.New=b7.Ctor(function(b$,ca){q.New.call(this);this.name=b$;this.fillWith=ca;},X);Y=x.VarFile=b7.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:Q.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(b$,ca){(b$(ca))(br.FileValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:Q.Map(a.String,this.fillWith.get_View())};}},q,Y);Y.New=b7.Ctor(function(b$,ca){q.New.call(this);this.name=b$;this.fillWith=ca;},Y);Z.GetFieldValues=function(b$){var ca,cb;ca=[];for(var cc in b$)ca.push(b$[cc]);return ca;};_0=x.VarDomElement=b7.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},q,_0);_0.New=b7.Ctor(function(b$,ca){q.New.call(this);this.name=b$;this.fillWith=ca;},_0);_1.TryParseInt32=function(b$,ca){return _1.TryParse(b$,-2147483648,2147483647,ca);};Q.MapSeqCached=function(b$,ca){return Q.MapSeqCachedBy(a.id,b$,ca);};Q.MapSeqCachedBy=function(b$,ca,cb){var cc;cc=[new N.New$5()];return Q.Map(function(cd){var ce,cf,cg;ce=cc[0];cf=new N.New$5();cg=bm.mapInPlace(function(ch){var ci,cj;ci=b$(ch);cj=ce.ContainsKey(ci)?ce.Item(ci):ca(ch);cf.set_Item(ci,cj);return cj;},n.ofSeq(cd));cc[0]=cf;return cg;},cb);};Q.Map=function(b$,ca){return Q.CreateLazy(function(){return w.Map(b$,ca());});};Q.Const=function(b$){var ca;ca=w.New({$:0,$0:b$});return function(){return ca;};};Q.Sink=function(b$,ca){function cb(){w.WhenRun(ca(),b$,function(){bD.scheduler().Fork(cb);});}bD.scheduler().Fork(cb);};Q.CreateLazy=function(b$){var ca;ca={c:null,o:b$};return function(){var cb,cc;cb=ca.c;return cb===null?(cb=ca.o(),ca.c=cb,(cc=cb.s,cc!=null&&cc.$==0)?ca.o=null:w.WhenObsoleteRun(cb,function(){ca.c=null;}),cb):cb;};};Q.Bind=function(b$,ca){return Q.Join(Q.Map(b$,ca));};Q.Map3=function(b$,ca,cb,cc){return Q.CreateLazy(function(){return w.Map3(b$,ca(),cb(),cc());});};Q.Sequence=function(b$){return Q.CreateLazy(function(){return w.Sequence(T.map(function(ca){return ca();},b$));});};Q.Map2=function(b$,ca,cb){return Q.CreateLazy(function(){return w.Map2(b$,ca(),cb());});};Q.Map2Unit=function(b$,ca){return Q.CreateLazy(function(){return w.Map2Unit(b$(),ca());});};Q.Join=function(b$){return Q.CreateLazy(function(){return w.Join(b$());});};_2.notPresent=function(){throw new bM.New();};_3.Get=function(b$){return b$ instanceof a.Array?_3.ArrayEnumerator(b$):r.Equals(typeof b$,"string")?_3.StringEnumerator(b$):b$.GetEnumerator();};_3.ArrayEnumerator=function(b$){return new _4.New(0,null,function(ca){var cb;cb=ca.s;return cb<n.length(b$)&&(ca.c=n.get(b$,cb),ca.s=cb+1,true);},void 0);};_3.StringEnumerator=function(b$){return new _4.New(0,null,function(ca){var cb;cb=ca.s;return cb<b$.length&&(ca.c=b$[cb],ca.s=cb+1,true);},void 0);};_3.Get0=function(b$){return b$ instanceof a.Array?_3.ArrayEnumerator(b$):r.Equals(typeof b$,"string")?_3.StringEnumerator(b$):"GetEnumerator0"in b$?b$.GetEnumerator0():b$.GetEnumerator();};_4=_3.T=b7.Class({MoveNext:function(){var b$;b$=this.n(this);this.e=b$?1:2;return b$;},Current:function(){return this.e===1?this.c:this.e===0?i.FailWith("Enumeration has not started. Call MoveNext."):i.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},f,_4);_4.New=b7.Ctor(function(b$,ca,cb,cc){f.New.call(this);this.s=b$;this.c=ca;this.n=cb;this.d=cc;this.e=0;},_4);_6.$cctor=function(){_6.$cctor=a.ignore;_6.LoadedTemplates=new N.New$5();_6.LocalTemplatesLoaded=false;_6.GlobalHoles=new N.New$5();_6.TextHoleRE="\\${([^}]+)}";_6.RenderedFullDocTemplate=null;};_7.LinkElement=function(b$,ca){_7.InsertDoc(b$,ca,null);};_7.InsertDoc=function(b$,ca,cb){var cc,cd,ce;while(true)if(ca!=null&&ca.$==1)return _7.InsertNode(b$,ca.$0.El,cb);else if(ca!=null&&ca.$==2){cc=ca.$0;cc.Dirty=false;ca=cc.Current;}else if(ca==null)return cb;else if(ca!=null&&ca.$==4)return _7.InsertNode(b$,ca.$0.Text,cb);else if(ca!=null&&ca.$==5)return _7.InsertNode(b$,ca.$0,cb);else if(ca!=null&&ca.$==6)return n.foldBack(function(cf,cg){return(((b7.Curried3(function(ch,ci,cj){return ci==null||ci.constructor===R?_7.InsertDoc(ch,ci,cj):_7.InsertNode(ch,ci,cj);}))(b$))(cf))(cg);},ca.$0.Els,cb);else{cd=ca.$1;ce=ca.$0;ca=ce;cb=_7.InsertDoc(b$,cd,cb);}};_7.CreateRunState=function(b$,ca){return bB.New(bC.get_Empty(),_7.CreateElemNode(b$,bo.EmptyAttr(),ca));};_7.PerformAnimatedUpdate=function(b$,ca,cb){var cc;return bh.get_UseAnimations()?(cc=null,bD.Delay(function(){var cd,ce,cf;cd=bC.FindAll(cb);ce=_7.ComputeChangeAnim(ca,cd);cf=_7.ComputeEnterAnim(ca,cd);return bD.Bind(bh.Play(bh.Append(ce,_7.ComputeExitAnim(ca,cd))),function(){return bD.Bind(_7.SyncElemNodesNextFrame(b$,ca),function(){return bD.Bind(bh.Play(cf),function(){ca.PreviousNodes=cd;return bD.Return(null);});});});})):_7.SyncElemNodesNextFrame(b$,ca);};_7.PerformSyncUpdate=function(b$,ca,cb){var cc;cc=bC.FindAll(cb);_7.SyncElemNode(b$,ca.Top);ca.PreviousNodes=cc;};_7.CreateEmbedNode=function(){return{Current:null,Dirty:false};};_7.UpdateEmbedNode=function(b$,ca){b$.Current=ca;b$.Dirty=true;};_7.InsertBeforeDelim=function(b$,ca){var cb,cc;cb=b$.parentNode;cc=self.document.createTextNode("");cb.insertBefore(cc,b$);_7.LinkPrevElement(b$,ca);return cc;};_7.InsertNode=function(b$,ca,cb){bf.InsertAt(b$,cb,ca);return ca;};_7.CreateElemNode=function(b$,ca,cb){var cc;_7.LinkElement(b$,cb);cc=bo.Insert(b$,ca);return _9.New(cc,cb,null,b$,L.Int(),b7.GetOptional(cc.OnAfterRender));};_7.SyncElemNodesNextFrame=function(b$,ca){function cb(cc){a.requestAnimationFrame(function(){_7.SyncElemNode(b$,ca.Top);cc();});}return bi.BatchUpdatesEnabled()?bD.FromContinuations(function(cc,cd,ce){return cb.apply(null,[cc,cd,ce]);}):(_7.SyncElemNode(b$,ca.Top),bD.Return(null));};_7.ComputeExitAnim=function(b$,ca){return bh.Concat(n.map(function(cb){return bo.GetExitAnim(cb.Attr);},bC.ToArray(bC.Except(ca,bC.Filter(function(cb){return bo.HasExitAnim(cb.Attr);},b$.PreviousNodes)))));};_7.ComputeEnterAnim=function(b$,ca){return bh.Concat(n.map(function(cb){return bo.GetEnterAnim(cb.Attr);},bC.ToArray(bC.Except(b$.PreviousNodes,bC.Filter(function(cb){return bo.HasEnterAnim(cb.Attr);},ca)))));};_7.ComputeChangeAnim=function(b$,ca){var cb;function cc(cd){return bo.HasChangeAnim(cd.Attr);}cb=function(cd){return bC.Filter(cc,cd);};return bh.Concat(n.map(function(cd){return bo.GetChangeAnim(cd.Attr);},bC.ToArray(bC.Intersect(cb(b$.PreviousNodes),cb(ca)))));};_7.SyncElemNode=function(b$,ca){!b$?_7.SyncElement(ca):void 0;_7.Sync(ca.Children);_7.AfterRender(ca);};_7.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};_7.UpdateTextNode=function(b$,ca){b$.Value=ca;b$.Dirty=true;};_7.LinkPrevElement=function(b$,ca){_7.InsertDoc(b$.parentNode,ca,b$);};_7.SyncElement=function(b$){function ca(cb){function cc(cd){var ce,cf,cg,ch;while(true){if(cd!=null&&cd.$==0){cf=cd.$1;cg=cd.$0;if(cc(cg))return true;else cd=cf;}else if(cd!=null&&cd.$==2){ch=cd.$0;if(ch.Dirty)return true;else cd=ch.Current;}else return cd!=null&&cd.$==6&&(ce=cd.$0,ce.Dirty||n.exists(ca,ce.Holes));}}return cc(cb.Children);}bo.Sync(b$.El,b$.Attr);if(ca(b$))_7.DoSyncElement(b$);};_7.Sync=function(b$){var ca,cb,cc,cd,ce;while(true){if(b$!=null&&b$.$==1)return _7.SyncElemNode(false,b$.$0);else if(b$!=null&&b$.$==2){cc=b$.$0;b$=cc.Current;}else if(b$==null)return null;else if(b$!=null&&b$.$==5)return null;else if(b$!=null&&b$.$==4){ca=b$.$0;return ca.Dirty?(ca.Text.nodeValue=ca.Value,ca.Dirty=false):null;}else if(b$!=null&&b$.$==6){cb=b$.$0;n.iter(function(cf){_7.SyncElemNode(false,cf);},cb.Holes);n.iter(function(cf){bo.Sync(cf[0],cf[1]);},cb.Attrs);return _7.AfterRender(cb);}else{cd=b$.$1;ce=b$.$0;_7.Sync(ce);b$=cd;}}};_7.AfterRender=function(b$){var ca;ca=b7.GetOptional(b$.Render);if(ca!=null&&ca.$==1){ca.$0(b$.El);b7.SetOptional(b$,"Render",null);}};_7.DoSyncElement=function(b$){var ca,cb,cc;function cd(ce,cf){var cg,ch,ci,cj;while(true){if(ce!=null&&ce.$==1)return ce.$0.El;else if(ce!=null&&ce.$==2){ch=ce.$0;if(ch.Dirty){ch.Dirty=false;return _7.InsertDoc(ca,ch.Current,cf);}else ce=ch.Current;}else if(ce==null)return cf;else if(ce!=null&&ce.$==4)return ce.$0.Text;else if(ce!=null&&ce.$==5)return ce.$0;else if(ce!=null&&ce.$==6){cg=ce.$0;cg.Dirty?cg.Dirty=false:void 0;return n.foldBack(function(ck,cl){return ck==null||ck.constructor===R?cd(ck,cl):ck;},cg.Els,cf);}else{ci=ce.$1;cj=ce.$0;ce=cj;cf=cd(ci,cf);}}}ca=b$.El;bY.Iter((cb=b$.El,function(ce){bf.RemoveNode(cb,ce);}),bY.Except(bY.DocChildren(b$),bY.Children(b$.El,b7.GetOptional(b$.Delimiters))));cd(b$.Children,(cc=b7.GetOptional(b$.Delimiters),cc!=null&&cc.$==1?cc.$0[1]:null));};_8.$cctor=function(){_8.$cctor=a.ignore;_8.counter=0;};_9=g.DocElemNode=b7.Class({Equals:function(b$){return this.ElKey===b$.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_9);_9.New=function(b$,ca,cb,cc,cd,ce){var cf;return new _9((cf={Attr:b$,Children:ca,El:cc,ElKey:cd},(b7.SetOptional(cf,"Delimiters",cb),b7.SetOptional(cf,"Render",ce),cf)));};$.InMemory=function(b$){return new bn.New(b$);};bb=g.Elt=b7.Class({},J,bb);bb.TreeNode=function(b$,ca){var cb,cc;function cd(ce,cf){return bo.Updates(cf);}cb=by.Create(ca);return new bb.New$1({$:6,$0:b$},Q.Map2Unit((cc=n.map(function(ce){return cd(ce[0],ce[1]);},b$.Attrs),bm.TreeReduce(Q.Const(),Q.Map2Unit,cc)),cb.v),n.get(b$.Els,0),cb);};bb.New$1=b7.Ctor(function(b$,ca,cb,cc){J.New.call(this,b$,ca);this.docNode$1=b$;this.updates$1=ca;this.elt=cb;this.rvUpdates=cc;},bb);bd.convertTextNode=function(b$){var ca,cb,cc,cd,ce,cf;ca=null;cb=0;cd=b$.textContent;ce=new a.RegExp(I.TextHoleRE(),"g");while(ca=ce.exec(cd),ca!==null){b$.parentNode.insertBefore(self.document.createTextNode(be.string(cd,{$:1,$0:cb},{$:1,$0:ce.lastIndex-n.get(ca,0).length-1})),b$);cb=ce.lastIndex;cf=self.document.createElement("span");cf.setAttribute("ws-replace",n.get(ca,1).toLowerCase());b$.parentNode.insertBefore(cf,b$);}ce.lastIndex=0;b$.textContent=be.string(cd,{$:1,$0:cb},null);};bd.failNotLoaded=function(b$){b8.warn("Instantiating non-loaded template",b$);};bd.fillTextHole=function(b$,ca,cb){var cc;cc=b$.querySelector("[ws-replace]");return r.Equals(cc,null)?(b8.warn("Filling non-existent text hole",cb),null):(cc.parentNode.replaceChild(self.document.createTextNode(ca),cc),{$:1,$0:cc.getAttribute("ws-replace")});};bd.removeHolesExcept=function(b$,ca){function cb(cc){I.foreachNotPreserved(b$,"["+cc+"]",function(cd){if(!ca.Contains(cd.getAttribute(cc)))cd.removeAttribute(cc);});}cb("ws-attr");cb("ws-onafterrender");cb("ws-var");I.foreachNotPreserved(b$,"[ws-hole]",function(cc){if(!ca.Contains(cc.getAttribute("ws-hole"))){cc.removeAttribute("ws-hole");while(cc.hasChildNodes())cc.removeChild(cc.lastChild);}});I.foreachNotPreserved(b$,"[ws-replace]",function(cc){if(!ca.Contains(cc.getAttribute("ws-replace")))cc.parentNode.removeChild(cc);});I.foreachNotPreserved(b$,"[ws-on]",function(cc){cc.setAttribute("ws-on",bx.concat(" ",n.filter(function(cd){return ca.Contains(n.get(bx.SplitChars(cd,[":"],1),1));},bx.SplitChars(cc.getAttribute("ws-on"),[" "],1))));});I.foreachNotPreserved(b$,"[ws-attr-holes]",function(cc){var cd,ce,cf,cg,ch;cd=bx.SplitChars(cc.getAttribute("ws-attr-holes"),[" "],1);for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=n.get(cd,ce);cc.setAttribute(cg,(ch=new a.RegExp(I.TextHoleRE(),"g"),cc.getAttribute(cg).replace(ch,function(ci,cj){return ca.Contains(cj)?ci:"";})));}});};bd.fillInstanceAttrs=function(b$,ca){var cb,cc,cd,ce,cf;bd.convertAttrs(ca);cb=ca.nodeName.toLowerCase();cc=b$.querySelector("[ws-attr="+cb+"]");if(r.Equals(cc,null))b8.warn("Filling non-existent attr hole",cb);else{cc.removeAttribute("ws-attr");for(cd=0,ce=ca.attributes.length-1;cd<=ce;cd++){cf=ca.attributes.item(cd);if(cf.name=="class"&&cc.hasAttribute("class"))cc.setAttribute("class",cc.getAttribute("class")+" "+cf.nodeValue);else cc.setAttribute(cf.name,cf.nodeValue);}}};bd.mapHoles=function(b$,ca){function cb(cc){I.foreachNotPreserved(b$,"["+cc+"]",function(cd){var ce,cf;ce=(cf=null,[ca.TryGetValue(cd.getAttribute(cc).toLowerCase(),{get:function(){return cf;},set:function(cg){cf=cg;}}),cf]);if(ce[0])cd.setAttribute(cc,ce[1]);});}cb("ws-hole");cb("ws-replace");cb("ws-attr");cb("ws-onafterrender");cb("ws-var");I.foreachNotPreserved(b$,"[ws-on]",function(cc){cc.setAttribute("ws-on",bx.concat(" ",n.map(function(cd){var ce,cf,cg;ce=bx.SplitChars(cd,[":"],1);cf=(cg=null,[ca.TryGetValue(n.get(ce,1),{get:function(){return cg;},set:function(ch){cg=ch;}}),cg]);return cf[0]?n.get(ce,0)+":"+cf[1]:cd;},bx.SplitChars(cc.getAttribute("ws-on"),[" "],1))));});I.foreachNotPreserved(b$,"[ws-attr-holes]",function(cc){var cd,ce,cf;cd=bx.SplitChars(cc.getAttribute("ws-attr-holes"),[" "],1);for(ce=0,cf=cd.length-1;ce<=cf;ce++)(function(){var cg;function ch(ci,cj){var ck;ck=i.KeyValue(cj);return ci.replace(new a.RegExp("\\${"+ck[0]+"}","ig"),"${"+ck[1]+"}");}cg=n.get(cd,ce);return cc.setAttribute(cg,(((b7.Curried3(T.fold))(ch))(cc.getAttribute(cg)))(ca));}());});};bd.fill=function(b$,ca,cb){while(true)if(b$.hasChildNodes())cb=ca.insertBefore(b$.lastChild,cb);else return null;};bd.convertAttrs=function(b$){var cb,cc,cd,ce,cf,cg,ch,ci;function ca(cj){var ck;ck=b$.getAttribute(cj);if(ck==null);else b$.setAttribute(cj,ck.toLowerCase());}cb=b$.attributes;cc=[];cd=[];ce=[];for(cf=0,cg=cb.length-1;cf<=cg;cf++){ch=cb.item(cf);if(bx.StartsWith(ch.nodeName,"ws-on")&&ch.nodeName!="ws-onafterrender"&&ch.nodeName!="ws-on"){cc.push(ch.nodeName);cd.push(be.string(ch.nodeName,{$:1,$0:"ws-on".length},null)+":"+ch.nodeValue.toLowerCase());}else!bx.StartsWith(ch.nodeName,"ws-")&&(new a.RegExp(I.TextHoleRE())).test(ch.nodeValue)?(ch.nodeValue=(ci=new a.RegExp(I.TextHoleRE(),"g"),ch.nodeValue.replace(ci,function(cj,ck){return"${"+ck.toLowerCase()+"}";})),ce.push(ch.nodeName)):void 0;}if(!(cd.length==0))b$.setAttribute("ws-on",bx.concat(" ",cd));if(!(ce.length==0))b$.setAttribute("ws-attr-holes",bx.concat(" ",ce));ca("ws-hole");ca("ws-replace");ca("ws-attr");ca("ws-onafterrender");ca("ws-var");n.iter(function(cj){b$.removeAttribute(cj);},cc);};be.string=function(b$,ca,cb){var cc,cd;return ca==null?cb!=null&&cb.$==1?(cc=cb.$0,cc<0?"":b$.slice(0,cc+1)):"":cb==null?b$.slice(ca.$0):(cd=cb.$0,cd<0?"":b$.slice(ca.$0,cd+1));};bf.ParseHTMLIntoFakeRoot=function(b$){var ca,cb,cc,cd,ce;function cf(cg,ch){var ci;while(true)if(ch===0)return cg;else{ci=ch;cg=cg.lastChild;ch=ci-1;}}ca=self.document.createElement("div");return!bf.rhtml().test(b$)?(ca.appendChild(self.document.createTextNode(b$)),ca):(cb=(cc=bf.rtagName().exec(b$),r.Equals(cc,null)?"":n.get(cc,1).toLowerCase()),(cd=(ce=(bf.wrapMap())[cb],ce?ce:bf.defaultWrap()),(ca.innerHTML=cd[1]+b$.replace(bf.rxhtmlTag(),"<$1></$2>")+cd[2],cf(ca,cd[0]))));};bf.ChildrenArray=function(b$){var ca,cb,cc;ca=[];for(cb=0,cc=b$.childNodes.length-1;cb<=cc;cb++)ca.push(b$.childNodes[cb]);return ca;};bf.rhtml=function(){bH.$cctor();return bH.rhtml;};bf.wrapMap=function(){bH.$cctor();return bH.wrapMap;};bf.defaultWrap=function(){bH.$cctor();return bH.defaultWrap;};bf.rxhtmlTag=function(){bH.$cctor();return bH.rxhtmlTag;};bf.rtagName=function(){bH.$cctor();return bH.rtagName;};bf.IterSelector=function(b$,ca,cb){var cc,cd,ce;cc=b$.querySelectorAll(ca);for(cd=0,ce=cc.length-1;cd<=ce;cd++)cb(cc[cd]);};bf.IterSelectorDoc=function(b$,ca){var cb,cc,cd;cb=self.document.querySelectorAll(b$);for(cc=0,cd=cb.length-1;cc<=cd;cc++)ca(cb[cc]);};bf.InsertAt=function(b$,ca,cb){var cc;if(!(cb.parentNode===b$&&ca===(cc=cb.nextSibling,r.Equals(cc,null)?null:cc)))b$.insertBefore(cb,ca);};bf.RemoveNode=function(b$,ca){if(ca.parentNode===b$)b$.removeChild(ca);};T.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};T.nonNegative=function(){return i.FailWith("The input must be non-negative.");};bg=M.KeyCollection=b7.Class({GetEnumerator:function(){return _3.Get(T.map(function(b$){return b$.K;},this.d));}},f,bg);bg.New=b7.Ctor(function(b$){f.New.call(this);this.d=b$;},bg);bh.get_UseAnimations=function(){return bE.UseAnimations();};bh.Play=function(b$){var ca;ca=null;return bD.Delay(function(){return bD.Bind(bh.Run(a.ignore,bE.Actions(b$)),function(){bE.Finalize(b$);return bD.Return(null);});});};bh.Append=function(b$,ca){return{$:0,$0:bJ.Append(b$.$0,ca.$0)};};bh.Run=function(b$,ca){var cb;function cc(cd){function ce(cf){return function(cg){var ch;ch=cg-cf;ca.Compute(ch);b$();return ch<=cb?void a.requestAnimationFrame(function(ci){(ce(cf))(ci);}):cd();};}a.requestAnimationFrame(function(cf){(ce(cf))(cf);});}cb=ca.Duration;return cb===0?bD.Zero():bD.FromContinuations(function(cd,ce,cf){return cc.apply(null,[cd,ce,cf]);});};bh.Concat=function(b$){return{$:0,$0:bJ.Concat(T.map(bE.List,b$))};};bh.get_Empty=function(){return{$:0,$0:bJ.Empty()};};bi.BatchUpdatesEnabled=function(){bF.$cctor();return bF.BatchUpdatesEnabled;};bj.StartProcessor=function(b$){var ca;function cb(){var cc;cc=null;return bD.Delay(function(){return bD.Bind(b$,function(){var cd;cd=ca[0];return r.Equals(cd,1)?(ca[0]=0,bD.Zero()):r.Equals(cd,2)?(ca[0]=1,cb()):bD.Zero();});});}ca=[0];return function(){var cc;cc=ca[0];if(r.Equals(cc,0)){ca[0]=1;bD.Start(cb(),null);}else r.Equals(cc,1)?ca[0]=2:void 0;};};bl.New=function(b$,ca,cb,cc){var cd;cd={DynElem:b$,DynFlags:ca,DynNodes:cb};b7.SetOptional(cd,"OnAfterRender",cc);return cd;};bm.mapInPlace=function(b$,ca){var cb,cc;for(cb=0,cc=ca.length-1;cb<=cc;cb++)ca[cb]=b$(ca[cb]);return ca;};bm.ofSeqNonCopying=function(b$){var ca,cb;if(b$ instanceof a.Array)return b$;else if(b$ instanceof bw)return n.ofList(b$);else if(b$===null)return[];else{ca=[];cb=_3.Get(b$);try{while(cb.MoveNext())ca.push(cb.Current());return ca;}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}}};bm.TreeReduce=function(b$,ca,cb){var cc;function cd(ce){return function(cf){var cg,ch;switch(cf<=0?0:cf===1?ce>=0&&ce<cc?1:(cg=cf,2):(cg=cf,2)){case 0:return b$;case 1:return n.get(cb,ce);case 2:ch=cf/2>>0;return ca((cd(ce))(ch),(cd(ce+ch))(cf-ch));}};}cc=n.length(cb);return(cd(0))(cc);};bm.MapTreeReduce=function(b$,ca,cb,cc){var cd;function ce(cf){return function(cg){var ch,ci;switch(cg<=0?0:cg===1?cf>=0&&cf<cd?1:(ch=cg,2):(ch=cg,2)){case 0:return ca;case 1:return b$(n.get(cc,cf));case 2:ci=cg/2>>0;return cb((ce(cf))(ci),(ce(cf+ci))(cg-ci));}};}cd=n.length(cc);return(ce(0))(cd);};bn=$.ArrayStorage=b7.Class({SSetAt:function(b$,ca,cb){n.set(cb,b$,ca);return cb;},SAppend:function(b$,ca){ca.push(b$);return ca;},SInit:function(){return this.init;}},f,bn);bn.New=b7.Ctor(function(b$){f.New.call(this);this.init=b$;},bn);bo.Insert=function(b$,ca){var cb,cc,cd;function ce(cf){var cg,ch;while(true)if(!(cf===null)){if(cf!=null&&cf.$==1)return cb.push(cf.$0);else if(cf!=null&&cf.$==2){cg=cf.$1;ch=cf.$0;ce(ch);cf=cg;}else return cf!=null&&cf.$==3?cf.$0(b$):cf!=null&&cf.$==4?cc.push(cf.$0):null;}else return null;}cb=[];cc=[];ce(ca);cd=cb.slice(0);return bl.New(b$,bo.Flags(ca),cd,cc.length===0?null:{$:1,$0:function(cf){T.iter(function(cg){cg(cf);},cc);}});};bo.Updates=function(b$){return bm.MapTreeReduce(function(ca){return ca.NChanged();},Q.Const(),Q.Map2Unit,b$.DynNodes);};bo.Empty=function(b$){return bl.New(b$,0,[],null);};bo.Flags=function(b$){return b$!==null&&b$.hasOwnProperty("flags")?b$.flags:0;};bo.Static=function(b$){return new bs({$:3,$0:b$});};bo.Dynamic=function(b$,ca){return new bs({$:1,$0:new bK.New(b$,ca)});};bo.EmptyAttr=function(){bN.$cctor();return bN.EmptyAttr;};bo.HasExitAnim=function(b$){var ca;ca=2;return(b$.DynFlags&ca)===ca;};bo.GetExitAnim=function(b$){return bo.GetAnim(b$,function(ca,cb){return ca.NGetExitAnim(cb);});};bo.HasEnterAnim=function(b$){var ca;ca=1;return(b$.DynFlags&ca)===ca;};bo.GetEnterAnim=function(b$){return bo.GetAnim(b$,function(ca,cb){return ca.NGetEnterAnim(cb);});};bo.HasChangeAnim=function(b$){var ca;ca=4;return(b$.DynFlags&ca)===ca;};bo.GetChangeAnim=function(b$){return bo.GetAnim(b$,function(ca,cb){return ca.NGetChangeAnim(cb);});};bo.AppendTree=function(b$,ca){var cb;return b$===null?ca:ca===null?b$:(cb=new bs({$:2,$0:b$,$1:ca}),(bo.SetFlags(cb,bo.Flags(b$)|bo.Flags(ca)),cb));};bo.GetAnim=function(b$,ca){return bh.Concat(n.map(function(cb){return ca(cb,b$.DynElem);},b$.DynNodes));};bo.Sync=function(b$,ca){n.iter(function(cb){cb.NSync(b$);},ca.DynNodes);};bo.SetFlags=function(b$,ca){b$.flags=ca;};bp=x.Attribute=b7.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},q,bp);bq=x.Event=b7.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},q,bq);br.Handler=function(b$,ca){return bo.Static(function(cb){cb.addEventListener(b$,function(cc){return(ca(cb))(cc);},false);});};br.OnAfterRender=function(b$){return new bs({$:4,$0:b$});};br.Dynamic=function(b$,ca){return bo.Dynamic(ca,function(cb){return function(cc){return cb.setAttribute(b$,cc);};});};br.Value=function(b$){return br.ValueWith(bU.StringApply(),b$);};br.FloatValueUnchecked=function(b$){return br.ValueWith(bU.FloatApplyUnchecked(),b$);};br.Checked=function(b$){return br.ValueWith(bU.BoolCheckedApply(),b$);};br.DateTimeValue=function(b$){return br.ValueWith(bU.DateTimeApplyUnchecked(),b$);};br.FileValue=function(b$){return br.ValueWith(bU.FileApplyUnchecked(),b$);};br.ValueWith=function(b$,ca){var cb;cb=b$(ca);return bs.Append(bo.Static(cb[0]),br.DynamicCustom(cb[1],cb[2]));};br.DynamicCustom=function(b$,ca){return bo.Dynamic(ca,b$);};bs=g.AttrProxy=b7.Class({},null,bs);bs.Handler=function(b$,ca){return bs.HandlerImpl(b$,ca);};bs.Concat=function(b$){var ca;ca=bm.ofSeqNonCopying(b$);return bm.TreeReduce(bo.EmptyAttr(),bs.Append,ca);};bs.Create=function(b$,ca){return bo.Static(function(cb){cb.setAttribute(b$,ca);});};bs.HandlerImpl=function(b$,ca){return bo.Static(function(cb){cb.addEventListener(b$,function(cc){return(ca(cb))(cc);},false);});};bs.Append=function(b$,ca){return bo.AppendTree(b$,ca);};bt=x.AfterRender=b7.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},q,bt);bu=x.AfterRenderQ=b7.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},q,bu);bw=bv.T=b7.Class({GetEnumerator:function(){return new _4.New(this,null,function(b$){var ca;ca=b$.s;return ca.$==0?false:(b$.c=ca.$0,b$.s=ca.$1,true);},void 0);}},null,bw);bw.Empty=new bw({$:0});bx.concat=function(b$,ca){return n.ofSeq(ca).join(b$);};bx.SplitChars=function(b$,ca,cb){return bx.Split(b$,new a.RegExp("["+bx.RegexEscape(ca.join(""))+"]"),cb);};bx.StartsWith=function(b$,ca){return b$.substring(0,ca.length)==ca;};bx.Split=function(b$,ca,cb){return cb===1?n.filter(function(cc){return cc!=="";},bx.SplitWith(b$,ca)):bx.SplitWith(b$,ca);};bx.RegexEscape=function(b$){return b$.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bx.SplitWith=function(b$,ca){return b$.split(ca);};bx.forall=function(b$,ca){return T.forall(b$,bx.protect(ca));};bx.protect=function(b$){return b$==null?"":b$;};by=g.Updates=b7.Class({},null,by);by.Create=function(b$){var ca;ca=null;ca=by.New(b$,null,function(){var cb;cb=ca.s;return cb===null?(cb=w.Copy(ca.c()),ca.s=cb,w.WhenObsoleteRun(cb,function(){ca.s=null;}),cb):cb;});return ca;};by.New=function(b$,ca,cb){return new by({c:b$,s:ca,v:cb});};bz=M.ValueCollection=b7.Class({GetEnumerator:function(){return _3.Get(T.map(function(b$){return b$.V;},this.d));}},f,bz);bz.New=b7.Ctor(function(b$){f.New.call(this);this.d=b$;},bz);bB.New=function(b$,ca){return{PreviousNodes:b$,Top:ca};};bC.get_Empty=function(){return{$:0,$0:new S.New$3()};};bC.FindAll=function(b$){var ca;function cb(ce,cf){var cg,ch,ci,cj,ck;while(true)switch(ce){case 0:if(cf!=null&&cf.$==0){ch=cf.$1;ci=cf.$0;cb(0,ci);cf=ch;}else if(cf!=null&&cf.$==1){cj=cf.$0;cf=cj;ce=1;}else if(cf!=null&&cf.$==2){ck=cf.$0;cf=ck.Current;}else return cf!=null&&cf.$==6?(cg=cf.$0.Holes,(function(cl){return function(cm){n.iter(cl,cm);};}(cd))(cg)):null;break;case 1:ca.push(cf);cf=cf.Children;ce=0;break;}}function cc(ce){return cb(0,ce);}function cd(ce){return cb(1,ce);}ca=[];cc(b$);return{$:0,$0:new S.New$2(ca)};};bC.Filter=function(b$,ca){return{$:0,$0:bT.Filter(b$,ca.$0)};};bC.Except=function(b$,ca){return{$:0,$0:bT.Except(b$.$0,ca.$0)};};bC.ToArray=function(b$){return bT.ToArray(b$.$0);};bC.Intersect=function(b$,ca){return{$:0,$0:bT.Intersect(b$.$0,ca.$0)};};bD.Delay=function(b$){return function(ca){try{(b$(null))(ca);}catch(cb){ca.k({$:1,$0:cb});}};};bD.Bind=function(b$,ca){return bD.checkCancel(function(cb){b$(bQ.New(function(cc){var cd;if(cc.$==0){cd=cc.$0;bD.scheduler().Fork(function(){try{(ca(cd))(cb);}catch(ce){cb.k({$:1,$0:ce});}});}else bD.scheduler().Fork(function(){cb.k(cc);});},cb.ct));});};bD.Zero=function(){bR.$cctor();return bR.Zero;};bD.Start=function(b$,ca){var cb,cc;cb=(cc=(bD.defCTS())[0],ca==null?cc:ca.$0);bD.scheduler().Fork(function(){if(!cb.c)b$(bQ.New(function(cd){if(cd.$==1)bD.UncaughtAsyncError(cd.$0);},cb));});};bD.Return=function(b$){return function(ca){ca.k({$:0,$0:b$});};};bD.scheduler=function(){bR.$cctor();return bR.scheduler;};bD.checkCancel=function(b$){return function(ca){if(ca.ct.c)bD.cancel(ca);else b$(ca);};};bD.defCTS=function(){bR.$cctor();return bR.defCTS;};bD.UncaughtAsyncError=function(b$){b8.log("WebSharper: Uncaught asynchronous exception",b$);};bD.FromContinuations=function(b$){return function(ca){var cb;function cc(cd){if(cb[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{cb[0]=true;bD.scheduler().Fork(cd);}}cb=[false];b$(function(cd){cc(function(){ca.k({$:0,$0:cd});});},function(cd){cc(function(){ca.k({$:1,$0:cd});});},function(cd){cc(function(){ca.k({$:2,$0:cd});});});};};bD.cancel=function(b$){b$.k({$:2,$0:new b2.New(b$.ct)});};bE.UseAnimations=function(){bI.$cctor();return bI.UseAnimations;};bE.Actions=function(b$){return bE.ConcatActions(n.choose(function(ca){return ca.$==1?{$:1,$0:ca.$0}:null;},bJ.ToArray(b$.$0)));};bE.Finalize=function(b$){n.iter(function(ca){if(ca.$==0)ca.$0();},bJ.ToArray(b$.$0));};bE.ConcatActions=function(b$){var ca,cb,cc,cd;ca=bm.ofSeqNonCopying(b$);cb=n.length(ca);return cb===0?bE.Const():cb===1?n.get(ca,0):(cc=T.max(T.map(function(ce){return ce.Duration;},ca)),(cd=n.map(function(ce){return bE.Prolong(cc,ce);},ca),bE.Def(cc,function(ce){n.iter(function(cf){cf.Compute(ce);},cd);})));};bE.List=function(b$){return b$.$0;};bE.Const=function(b$){return bE.Def(0,function(){return b$;});};bE.Def=function(b$,ca){return{Compute:ca,Duration:b$};};bE.Prolong=function(b$,ca){var cb,cc,cd;cb=ca.Compute;cc=ca.Duration;cd=b3.Create(function(){return ca.Compute(ca.Duration);});return{Compute:function(ce){return ce>=cc?cd.f():cb(ce);},Duration:b$};};bF.$cctor=function(){bF.$cctor=a.ignore;bF.BatchUpdatesEnabled=true;};bG.concat=function(b$){var ca,cb;ca=[];for(var cc in b$)ca.push.apply(ca,b$[cc]);return ca;};bH.$cctor=function(){var b$;bH.$cctor=a.ignore;bH.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bH.rtagName=new a.RegExp("<([\\w:]+)");bH.rhtml=new a.RegExp("<|&#?\\w+;");bH.wrapMap=(b$=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:b$,tbody:b$,tfoot:b$,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bH.defaultWrap=[0,"",""];};bI.$cctor=function(){bI.$cctor=a.ignore;bI.CubicInOut=bP.Custom(function(b$){var ca;ca=b$*b$;return 3*ca-2*(ca*b$);});bI.UseAnimations=true;};bJ.Append=function(b$,ca){return b$.$==0?ca:ca.$==0?b$:{$:2,$0:b$,$1:ca};};bJ.ToArray=function(b$){var ca;function cb(cc){var cd,ce;while(true)if(cc.$==1)return ca.push(cc.$0);else if(cc.$==2){cd=cc.$1;ce=cc.$0;cb(ce);cc=cd;}else return cc.$==3?n.iter(function(cf){ca.push(cf);},cc.$0):null;}ca=[];cb(b$);return ca.slice(0);};bJ.Concat=function(b$){var ca;ca=bm.ofSeqNonCopying(b$);return bm.TreeReduce(bJ.Empty(),bJ.Append,ca);};bJ.Empty=function(){b4.$cctor();return b4.Empty;};bv.head=function(b$){return b$.$==1?b$.$0:bv.listEmpty();};bv.tail=function(b$){return b$.$==1?b$.$1:bv.listEmpty();};bv.listEmpty=function(){return i.FailWith("The input list was empty.");};bK=g.DynamicAttrNode=b7.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b$){return bh.get_Empty();},NGetEnterAnim:function(b$){return bh.get_Empty();},NGetChangeAnim:function(b$){return bh.get_Empty();},NSync:function(b$){if(this.dirty){(this.push(b$))(this.value);this.dirty=false;}}},f,bK);bK.New=b7.Ctor(function(b$,ca){var cb;cb=this;f.New.call(this);this.push=ca;this.value=void 0;this.dirty=false;this.updates=Q.Map(function(cc){cb.value=cc;cb.dirty=true;},b$);},bK);bM=e.KeyNotFoundException=b7.Class({},bL,bM);bM.New=b7.Ctor(function(){bM.New$1.call(this,"The given key was not present in the dictionary.");},bM);bM.New$1=b7.Ctor(function(b$){this.message=b$;R.setPrototypeOf(this,bM.prototype);},bM);bN.$cctor=function(){var b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm;bN.$cctor=a.ignore;bN.EmptyAttr=null;bN.BoolCheckedApply=function(cn){function co(cp,cq){return cq!=null&&cq.$==1?void(cp.checked=cq.$0):null;}return[function(cp){cp.addEventListener("change",function(){return cn.Get()!=cp.checked?cn.Set(cp.checked):null;});},function(cp){return function(cq){return co(cp,cq);};},Q.Map(function(cp){return{$:1,$0:cp};},cn.get_View())];};bN.StringSet=function(cn){return function(co){cn.value=co;};};bN.StringGet=function(cn){return{$:1,$0:cn.value};};bN.StringApply=(b$=bU.StringGet(),(ca=bU.StringSet(),function(cn){return bU.ApplyValue(b$,ca,cn);}));bN.DateTimeSetUnchecked=function(cn){return function(co){cn.value=(new a.Date(co)).toLocaleString();};};bN.DateTimeGetUnchecked=function(cn){var co,cp,cq,cr;co=cn.value;return bV.isBlank(co)?{$:1,$0:-8640000000000000}:(cp=(cq=0,[(cr=b1.TryParse(co),cr!=null&&cr.$==1&&(cq=cr.$0,true)),cq]),cp[0]?{$:1,$0:cp[1]}:null);};bN.DateTimeApplyUnchecked=(cb=bU.DateTimeGetUnchecked(),(cc=bU.DateTimeSetUnchecked(),function(cn){return bU.ApplyValue(cb,cc,cn);}));bN.FileSetUnchecked=function(){return function(){return null;};};bN.FileGetUnchecked=function(cn){var co;co=cn.files;return{$:1,$0:n.ofSeq(T.delay(function(){return T.map(function(cp){return co.item(cp);},i.range(0,co.length-1));}))};};bN.FileApplyUnchecked=(cd=bU.FileGetUnchecked(),(ce=bU.FileSetUnchecked(),function(cn){return bU.FileApplyValue(cd,ce,cn);}));bN.IntSetUnchecked=function(cn){return function(co){cn.value=a.String(co);};};bN.IntGetUnchecked=function(cn){var co,cp;co=cn.value;return bV.isBlank(co)?{$:1,$0:0}:(cp=+co,cp!==cp>>0?null:{$:1,$0:cp});};bN.IntApplyUnchecked=(cf=bU.IntGetUnchecked(),(cg=bU.IntSetUnchecked(),function(cn){return bU.ApplyValue(cf,cg,cn);}));bN.IntSetChecked=function(cn){return function(co){var cp;cp=co.get_Input();return cn.value!=cp?void(cn.value=cp):null;};};bN.IntGetChecked=function(cn){var co,cp,cq;co=cn.value;return{$:1,$0:bV.isBlank(co)?(cn.checkValidity?cn.checkValidity():true)?new bW({$:2,$0:co}):new bW({$:1,$0:co}):(cp=(cq=0,[_1.TryParseInt32(co,{get:function(){return cq;},set:function(cr){cq=cr;}}),cq]),cp[0]?new bW({$:0,$0:cp[1],$1:co}):new bW({$:1,$0:co}))};};bN.IntApplyChecked=(ch=bU.IntGetChecked(),(ci=bU.IntSetChecked(),function(cn){return bU.ApplyValue(ch,ci,cn);}));bN.FloatSetUnchecked=function(cn){return function(co){cn.value=a.String(co);};};bN.FloatGetUnchecked=function(cn){var co,cp;co=cn.value;return bV.isBlank(co)?{$:1,$0:0}:(cp=+co,a.isNaN(cp)?null:{$:1,$0:cp});};bN.FloatApplyUnchecked=(cj=bU.FloatGetUnchecked(),(ck=bU.FloatSetUnchecked(),function(cn){return bU.ApplyValue(cj,ck,cn);}));bN.FloatSetChecked=function(cn){return function(co){var cp;cp=co.get_Input();return cn.value!=cp?void(cn.value=cp):null;};};bN.FloatGetChecked=function(cn){var co,cp;co=cn.value;return{$:1,$0:bV.isBlank(co)?(cn.checkValidity?cn.checkValidity():true)?new bW({$:2,$0:co}):new bW({$:1,$0:co}):(cp=+co,a.isNaN(cp)?new bW({$:1,$0:co}):new bW({$:0,$0:cp,$1:co}))};};bN.FloatApplyChecked=(cl=bU.FloatGetChecked(),(cm=bU.FloatSetChecked(),function(cn){return bU.ApplyValue(cl,cm,cn);}));};bO=bD.Scheduler=b7.Class({Fork:function(b$){var ca;ca=this;this.robin.push(b$);if(this.idle){this.idle=false;a.setTimeout(function(){ca.tick();},0);}},tick:function(){var b$,ca,cb;ca=this;cb=b_.now();b$=true;while(b$)if(this.robin.length===0){this.idle=true;b$=false;}else{(this.robin.shift())();b_.now()-cb>40?(a.setTimeout(function(){ca.tick();},0),b$=false):void 0;}}},f,bO);bO.New=b7.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bO);bP=g.Easing=b7.Class({},f,bP);bP.Custom=function(b$){return new bP.New(b$);};bP.New=b7.Ctor(function(b$){f.New.call(this);this.transformTime=b$;},bP);bQ.New=function(b$,ca){return{k:b$,ct:ca};};bR.$cctor=function(){bR.$cctor=a.ignore;bR.noneCT=bS.New(false,[]);bR.scheduler=new bO.New();bR.defCTS=[new bX.New()];bR.Zero=bD.Return();bR.GetCT=function(b$){b$.k({$:0,$0:b$.ct});};};bS.New=function(b$,ca){return{c:b$,r:ca};};bT.Filter=function(b$,ca){return new S.New$2(n.filter(b$,bT.ToArray(ca)));};bT.Except=function(b$,ca){var cb;cb=new S.New$2(bT.ToArray(ca));cb.ExceptWith(bT.ToArray(b$));return cb;};bT.ToArray=function(b$){var ca;ca=n.create(b$.Count(),void 0);b$.CopyTo(ca,0);return ca;};bT.Intersect=function(b$,ca){var cb;cb=new S.New$2(bT.ToArray(b$));cb.IntersectWith(bT.ToArray(ca));return cb;};bU.ApplyValue=function(b$,ca,cb){var cc;function cd(ce,cf){return cf==null?null:ce(cf.$0);}cc=null;return[function(ce){function cf(){cb.UpdateMaybe(function(cg){var ch;cc=b$(ce);return cc!=null&&cc.$==1&&(!r.Equals(cc.$0,cg)&&(ch=[cc,cc.$0],true))?ch[0]:null;});}ce.addEventListener("change",cf);ce.addEventListener("input",cf);ce.addEventListener("keypress",cf);},function(ce){var cf;cf=ca(ce);return function(cg){return cd(cf,cg);};},Q.Map(function(ce){var cf;return cc!=null&&cc.$==1&&(r.Equals(cc.$0,ce)&&(cf=cc.$0,true))?null:{$:1,$0:ce};},cb.get_View())];};bU.StringSet=function(){bN.$cctor();return bN.StringSet;};bU.StringGet=function(){bN.$cctor();return bN.StringGet;};bU.DateTimeSetUnchecked=function(){bN.$cctor();return bN.DateTimeSetUnchecked;};bU.DateTimeGetUnchecked=function(){bN.$cctor();return bN.DateTimeGetUnchecked;};bU.FileApplyValue=function(b$,ca,cb){var cc;function cd(ce,cf){return cf==null?null:ce(cf.$0);}cc=null;return[function(ce){ce.addEventListener("change",function(){cb.UpdateMaybe(function(cf){var cg;cc=b$(ce);return cc!=null&&cc.$==1&&(cc.$0!==cf&&(cg=[cc,cc.$0],true))?cg[0]:null;});});},function(ce){var cf;cf=ca(ce);return function(cg){return cd(cf,cg);};},Q.Map(function(ce){var cf;return cc!=null&&cc.$==1&&(r.Equals(cc.$0,ce)&&(cf=cc.$0,true))?null:{$:1,$0:ce};},cb.get_View())];};bU.FileSetUnchecked=function(){bN.$cctor();return bN.FileSetUnchecked;};bU.FileGetUnchecked=function(){bN.$cctor();return bN.FileGetUnchecked;};bU.IntSetUnchecked=function(){bN.$cctor();return bN.IntSetUnchecked;};bU.IntGetUnchecked=function(){bN.$cctor();return bN.IntGetUnchecked;};bU.IntSetChecked=function(){bN.$cctor();return bN.IntSetChecked;};bU.IntGetChecked=function(){bN.$cctor();return bN.IntGetChecked;};bU.FloatSetUnchecked=function(){bN.$cctor();return bN.FloatSetUnchecked;};bU.FloatGetUnchecked=function(){bN.$cctor();return bN.FloatGetUnchecked;};bU.FloatSetChecked=function(){bN.$cctor();return bN.FloatSetChecked;};bU.FloatGetChecked=function(){bN.$cctor();return bN.FloatGetChecked;};bU.StringApply=function(){bN.$cctor();return bN.StringApply;};bU.FloatApplyUnchecked=function(){bN.$cctor();return bN.FloatApplyUnchecked;};bU.BoolCheckedApply=function(){bN.$cctor();return bN.BoolCheckedApply;};bU.DateTimeApplyUnchecked=function(){bN.$cctor();return bN.DateTimeApplyUnchecked;};bU.FileApplyUnchecked=function(){bN.$cctor();return bN.FileApplyUnchecked;};bV.isBlank=function(b$){return bx.forall(b0.IsWhiteSpace,b$);};bW=g.CheckedInput=b7.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bW);bX=e.CancellationTokenSource=b7.Class({},f,bX);bX.New=b7.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bX);bY.Children=function(b$,ca){var cb,cc,cd;if(ca!=null&&ca.$==1){cd=[];cb=ca.$0[0].nextSibling;while(cb!==ca.$0[1]){cd.push(cb);cb=cb.nextSibling;}return{$:0,$0:cd};}else return{$:0,$0:n.init(b$.childNodes.length,(cc=b$.childNodes,function(ce){return cc[ce];}))};};bY.Except=function(b$,ca){var cb;cb=b$.$0;return{$:0,$0:n.filter(function(cc){return n.forall(function(cd){return!(cc===cd);},cb);},ca.$0)};};bY.Iter=function(b$,ca){n.iter(b$,ca.$0);};bY.DocChildren=function(b$){var ca;function cb(cc){var cd,ce,cf,cg;while(true){if(cc!=null&&cc.$==2){ce=cc.$0;cc=ce.Current;}else if(cc!=null&&cc.$==1)return ca.push(cc.$0.El);else if(cc==null)return null;else if(cc!=null&&cc.$==5)return ca.push(cc.$0);else if(cc!=null&&cc.$==4)return ca.push(cc.$0.Text);else if(cc!=null&&cc.$==6){cd=cc.$0.Els;return(function(ch){return function(ci){n.iter(ch,ci);};}(function(ch){if(ch==null||ch.constructor===R)cb(ch);else ca.push(ch);}))(cd);}else{cf=cc.$1;cg=cc.$0;cb(cg);cc=cf;}}}ca=[];cb(b$.Children);return{$:0,$0:bm.ofSeqNonCopying(ca)};};bZ.Clear=function(b$){b$.splice(0,n.length(b$));};b0.IsWhiteSpace=function(b$){return b$.match(new a.RegExp("\\s"))!==null;};b1.TryParse=function(b$){var ca;ca=b_.parse(b$);return a.isNaN(ca)?null:{$:1,$0:ca};};_1.TryParse=function(b$,ca,cb,cc){var cd,ce;cd=+b$;ce=cd===cd-cd%1&&cd>=ca&&cd<=cb;if(ce)cc.set(cd);return ce;};b2=e.OperationCanceledException=b7.Class({},bL,b2);b2.New=b7.Ctor(function(b$){b2.New$1.call(this,"The operation was canceled.",null,b$);},b2);b2.New$1=b7.Ctor(function(b$,ca,cb){this.message=b$;this.inner=ca;R.setPrototypeOf(this,b2.prototype);this.ct=cb;},b2);b3.Create=function(b$){return b6.New(false,b$,b3.forceLazy);};b3.forceLazy=function(){var b$;b$=this.v();this.c=true;this.v=b$;this.f=b3.cachedLazy;return b$;};b3.cachedLazy=function(){return this.v;};b4.$cctor=function(){b4.$cctor=a.ignore;b4.Empty={$:0};};b6.New=function(b$,ca,cb){return{c:b$,v:ca,f:cb};};b7.OnLoad(function(){d.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
